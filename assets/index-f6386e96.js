import{Y as D,Z as E,a as L,M as b,k as j,_ as S}from"./index-f07ac78f.js";function y(e){return D()?(E(e),!0):!1}function w(e){return typeof e=="function"?e():L(e)}const T=typeof window<"u"&&typeof document<"u",g=Object.prototype.toString,O=e=>g.call(e)==="[object Object]",v=()=>{};function q(e,i){function n(...o){return new Promise((t,r)=>{Promise.resolve(e(()=>i.apply(this,o),{fn:i,thisArg:this,args:o})).then(t).catch(r)})}return n}function x(e,i=!0,n=!0,o=!1){let t=0,r,c=!0,m=v,u;const p=()=>{r&&(clearTimeout(r),r=void 0,m(),m=v)};return l=>{const s=w(e),f=Date.now()-t,d=()=>u=l();return p(),s<=0?(t=Date.now(),d()):(f>s&&(n||!c)?(t=Date.now(),d()):i&&(u=new Promise((h,F)=>{m=o?F:h,r=setTimeout(()=>{t=Date.now(),c=!0,h(d()),p()},Math.max(0,s-f))})),!n&&!r&&(r=setTimeout(()=>c=!0,s)),c=!1,u)}}function P(e,i=200,n=!1,o=!0,t=!1){return q(x(i,n,o,t),e)}function C(e){var i;const n=w(e);return(i=n==null?void 0:n.$el)!=null?i:n}const A=T?window:void 0;function W(...e){let i,n,o,t;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,t]=e,i=A):[i,n,o,t]=e,!i)return v;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],c=()=>{r.forEach(a=>a()),r.length=0},m=(a,l,s,f)=>(a.addEventListener(l,s,f),()=>a.removeEventListener(l,s,f)),u=b(()=>[C(i),w(t)],([a,l])=>{if(c(),!a)return;const s=O(l)?{...l}:l;r.push(...n.flatMap(f=>o.map(d=>m(a,f,d,s))))},{immediate:!0,flush:"post"}),p=()=>{u(),c()};return y(p),p}function k(e,i={}){const{immediate:n=!0,fpsLimit:o=void 0,window:t=A}=i,r=j(!1),c=o?1e3/o:null;let m=0,u=null;function p(s){if(!r.value||!t)return;const f=s-(m||s);if(c&&f<c){u=t.requestAnimationFrame(p);return}e({delta:f,timestamp:s}),m=s,u=t.requestAnimationFrame(p)}function a(){!r.value&&t&&(r.value=!0,u=t.requestAnimationFrame(p))}function l(){r.value=!1,u!=null&&t&&(t.cancelAnimationFrame(u),u=null)}return n&&a(),y(l),{isActive:S(r),pause:l,resume:a}}export{k as a,P as b,W as u};
