var Tt=Object.defineProperty;var At=(t,e,o)=>e in t?Tt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var E=(t,e,o)=>(At(t,typeof e!="symbol"?e+"":e,o),o),Ue=(t,e,o)=>{if(!e.has(t))throw TypeError("Cannot "+o)};var ne=(t,e,o)=>(Ue(t,e,"read from private field"),o?o.call(t):e.get(t)),I=(t,e,o)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,o)};var V=(t,e,o)=>(Ue(t,e,"access private method"),o);import{a as Oe,b as Ie,d as Le,j as Lt,g as kt}from"./base-f596fc81.js";import{i as Dt,C as Rt,u as Ve,E as Mt}from"./el-button-decb29f5.js";import{a3 as Ot,l as J,a4 as It,a5 as Se,E as at,a6 as Bt,M as G,_ as Pt,X as _e,k,d as W,V as rt,a as m,P as U,B as ke,C as Ft,q as $,y as Nt,L as We,f as Y,o as F,c as X,h as M,Q as K,t as Z,w as P,i as de,R as $t,S as Q,H as lt,K as Ut,N as Vt,z as Wt,U as Kt,a7 as Ht,A as zt,T as De,a8 as Yt,s as jt,p as Gt,F as Xt,j as qt}from"./index-433c33e9.js";import{O as Zt}from"./OrbitControls-5d4ea699.js";import{S as Jt,M as Qt,R as eo}from"./StaticGeometryGenerator-cbf8fa7f.js";import{V as z,y as to,M as Be,aT as Ke,T as oo,aU as so,b as ee,f as Pe,$ as no,g as it,K as He,J as ze,O as ao,a2 as ro,S as ct,a8 as lo,D as io,Y as co,aV as uo,aW as fo,aX as po,a as dt,P as mo,W as vo,a5 as yo,E as ho}from"./three.module-d7a93e67.js";import{d as go}from"./index-1a26f821.js";import{u as te}from"./index-674d1bac.js";import{G as bo}from"./GLTFLoader-06287125.js";import{R as wo}from"./Reflector-108fc290.js";import{E as Eo}from"./index-77bfdbce.js";import{_ as Fe,d as Ye,w as So}from"./use-form-item-a8d82445.js";import{b as Co,c as _o,a as xo}from"./use-global-config-55d3ff53.js";import{i as oe,b as Re,h as je,g as To,a as Ao,r as Lo,u as Ge}from"./style-68c15d32.js";import{t as ko,U as ut}from"./event-2c073216.js";import{_ as Do}from"./_plugin-vue_export-helper-c27b6911.js";function Ro(t){return t==null}let ae;const Mo=t=>{var e;if(!oe)return 0;if(ae!==void 0)return ae;const o=document.createElement("div");o.className=`${t}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const s=o.offsetWidth;o.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",o.appendChild(a);const r=a.offsetWidth;return(e=o.parentNode)==null||e.removeChild(o),ae=s-r,ae},Oo=(...t)=>e=>{t.forEach(o=>{Ot(o)?o(e):o.value=e})},ft={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};var ce=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(ce||{});const Io=(t,e,o)=>{let s={offsetX:0,offsetY:0};const a=u=>{const p=u.clientX,c=u.clientY,{offsetX:v,offsetY:f}=s,C=t.value.getBoundingClientRect(),h=C.left,i=C.top,l=C.width,n=C.height,y=document.documentElement.clientWidth,g=document.documentElement.clientHeight,_=-h+v,S=-i+f,T=y-h-l+v,b=g-i-n+f,L=D=>{const w=Math.min(Math.max(v+D.clientX-p,_),T),R=Math.min(Math.max(f+D.clientY-c,S),b);s={offsetX:w,offsetY:R},t.value.style.transform=`translate(${Re(w)}, ${Re(R)})`},x=()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",x)},r=()=>{e.value&&t.value&&e.value.addEventListener("mousedown",a)},d=()=>{e.value&&t.value&&e.value.removeEventListener("mousedown",a)};J(()=>{It(()=>{o.value?r():d()})}),Se(()=>{d()})},Bo=(t,e={})=>{at(t)||ko("[useLockscreen]","You need to pass a ref param to this function");const o=e.ns||Oe("popup"),s=Bt(()=>o.bm("parent","hidden"));if(!oe||je(document.body,s.value))return;let a=0,r=!1,d="0";const u=()=>{setTimeout(()=>{Lo(document==null?void 0:document.body,s.value),r&&document&&(document.body.style.width=d)},200)};G(t,p=>{if(!p){u();return}r=!je(document.body,s.value),r&&(d=document.body.style.width),a=Mo(o.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,v=To(document.body,"overflowY");a>0&&(c||v==="scroll")&&r&&(document.body.style.width=`calc(100% - ${a}px)`),Ao(document.body,s.value)}),Pt(()=>u())},pt=t=>{if(!t)return{onClick:_e,onMousedown:_e,onMouseup:_e};let e=!1,o=!1;return{onClick:d=>{e&&o&&t(d),e=o=!1},onMousedown:d=>{e=d.target===d.currentTarget},onMouseup:d=>{o=d.target===d.currentTarget}}};let q=[];const Xe=t=>{const e=t;e.key===ft.esc&&q.forEach(o=>o(e))},Po=t=>{J(()=>{q.length===0&&document.addEventListener("keydown",Xe),oe&&q.push(t)}),Se(()=>{q=q.filter(e=>e!==t),q.length===0&&oe&&document.removeEventListener("keydown",Xe)})},xe="focus-trap.focus-after-trapped",Te="focus-trap.focus-after-released",Fo="focus-trap.focusout-prevented",qe={cancelable:!0,bubbles:!1},No={cancelable:!0,bubbles:!1},Ze="focusAfterTrapped",Je="focusAfterReleased",mt=Symbol("elFocusTrap"),Ne=k(),Ce=k(0),$e=k(0);let re=0;const vt=t=>{const e=[],o=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0||s===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)e.push(o.currentNode);return e},Qe=(t,e)=>{for(const o of t)if(!$o(o,e))return o},$o=(t,e)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},Uo=t=>{const e=vt(t),o=Qe(e,t),s=Qe(e.reverse(),t);return[o,s]},Vo=t=>t instanceof HTMLInputElement&&"select"in t,H=(t,e)=>{if(t&&t.focus){const o=document.activeElement;t.focus({preventScroll:!0}),$e.value=window.performance.now(),t!==o&&Vo(t)&&e&&t.select()}};function et(t,e){const o=[...t],s=t.indexOf(e);return s!==-1&&o.splice(s,1),o}const Wo=()=>{let t=[];return{push:s=>{const a=t[0];a&&s!==a&&a.pause(),t=et(t,s),t.unshift(s)},remove:s=>{var a,r;t=et(t,s),(r=(a=t[0])==null?void 0:a.resume)==null||r.call(a)}}},Ko=(t,e=!1)=>{const o=document.activeElement;for(const s of t)if(H(s,e),document.activeElement!==o)return},tt=Wo(),Ho=()=>Ce.value>$e.value,le=()=>{Ne.value="pointer",Ce.value=window.performance.now()},ot=()=>{Ne.value="keyboard",Ce.value=window.performance.now()},zo=()=>(J(()=>{re===0&&(document.addEventListener("mousedown",le),document.addEventListener("touchstart",le),document.addEventListener("keydown",ot)),re++}),Se(()=>{re--,re<=0&&(document.removeEventListener("mousedown",le),document.removeEventListener("touchstart",le),document.removeEventListener("keydown",ot))}),{focusReason:Ne,lastUserFocusTimestamp:Ce,lastAutomatedFocusTimestamp:$e}),ie=t=>new CustomEvent(Fo,{...No,detail:t}),Yo=W({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[Ze,Je,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:e}){const o=k();let s,a;const{focusReason:r}=zo();Po(i=>{t.trapped&&!d.paused&&e("release-requested",i)});const d={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},u=i=>{if(!t.loop&&!t.trapped||d.paused)return;const{key:l,altKey:n,ctrlKey:y,metaKey:g,currentTarget:_,shiftKey:S}=i,{loop:T}=t,b=l===ft.tab&&!n&&!y&&!g,L=document.activeElement;if(b&&L){const x=_,[D,w]=Uo(x);if(D&&w){if(!S&&L===w){const A=ie({focusReason:r.value});e("focusout-prevented",A),A.defaultPrevented||(i.preventDefault(),T&&H(D,!0))}else if(S&&[D,x].includes(L)){const A=ie({focusReason:r.value});e("focusout-prevented",A),A.defaultPrevented||(i.preventDefault(),T&&H(w,!0))}}else if(L===x){const A=ie({focusReason:r.value});e("focusout-prevented",A),A.defaultPrevented||i.preventDefault()}}};rt(mt,{focusTrapRef:o,onKeydown:u}),G(()=>t.focusTrapEl,i=>{i&&(o.value=i)},{immediate:!0}),G([o],([i],[l])=>{i&&(i.addEventListener("keydown",u),i.addEventListener("focusin",v),i.addEventListener("focusout",f)),l&&(l.removeEventListener("keydown",u),l.removeEventListener("focusin",v),l.removeEventListener("focusout",f))});const p=i=>{e(Ze,i)},c=i=>e(Je,i),v=i=>{const l=m(o);if(!l)return;const n=i.target,y=i.relatedTarget,g=n&&l.contains(n);t.trapped||y&&l.contains(y)||(s=y),g&&e("focusin",i),!d.paused&&t.trapped&&(g?a=n:H(a,!0))},f=i=>{const l=m(o);if(!(d.paused||!l))if(t.trapped){const n=i.relatedTarget;!Ro(n)&&!l.contains(n)&&setTimeout(()=>{if(!d.paused&&t.trapped){const y=ie({focusReason:r.value});e("focusout-prevented",y),y.defaultPrevented||H(a,!0)}},0)}else{const n=i.target;n&&l.contains(n)||e("focusout",i)}};async function C(){await ke();const i=m(o);if(i){tt.push(d);const l=i.contains(document.activeElement)?s:document.activeElement;if(s=l,!i.contains(l)){const y=new Event(xe,qe);i.addEventListener(xe,p),i.dispatchEvent(y),y.defaultPrevented||ke(()=>{let g=t.focusStartEl;Ft(g)||(H(g),document.activeElement!==g&&(g="first")),g==="first"&&Ko(vt(i),!0),(document.activeElement===l||g==="container")&&H(i)})}}}function h(){const i=m(o);if(i){i.removeEventListener(xe,p);const l=new CustomEvent(Te,{...qe,detail:{focusReason:r.value}});i.addEventListener(Te,c),i.dispatchEvent(l),!l.defaultPrevented&&(r.value=="keyboard"||!Ho()||i.contains(document.activeElement))&&H(s??document.body),i.removeEventListener(Te,c),tt.remove(d)}}return J(()=>{t.trapped&&C(),G(()=>t.trapped,i=>{i?C():h()})}),Se(()=>{t.trapped&&h()}),{onKeydown:u}}});function jo(t,e,o,s,a,r){return U(t.$slots,"default",{handleKeydown:t.onKeydown})}var Go=Fe(Yo,[["render",jo],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const Xo=Ie({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Le([String,Array,Object])},zIndex:{type:Le([String,Number])}}),qo={click:t=>t instanceof MouseEvent},Zo="overlay";var Jo=W({name:"ElOverlay",props:Xo,emits:qo,setup(t,{slots:e,emit:o}){const s=Oe(Zo),a=p=>{o("click",p)},{onClick:r,onMousedown:d,onMouseup:u}=pt(t.customMaskEvent?void 0:a);return()=>t.mask?$("div",{class:[s.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:r,onMousedown:d,onMouseup:u},[U(e,"default")],ce.STYLE|ce.CLASS|ce.PROPS,["onClick","onMouseup","onMousedown"]):Nt("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[U(e,"default")])}});const Qo=Jo,yt=Symbol("dialogInjectionKey"),ht=Ie({center:Boolean,alignCenter:Boolean,closeIcon:{type:Dt},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),es={close:()=>!0},ts=["aria-level"],os=["aria-label"],ss=["id"],ns=W({name:"ElDialogContent"}),as=W({...ns,props:ht,emits:es,setup(t){const e=t,{t:o}=Co(),{Close:s}=Rt,{dialogRef:a,headerRef:r,bodyId:d,ns:u,style:p}=We(yt),{focusTrapRef:c}=We(mt),v=Y(()=>[u.b(),u.is("fullscreen",e.fullscreen),u.is("draggable",e.draggable),u.is("align-center",e.alignCenter),{[u.m("center")]:e.center},e.customClass]),f=Oo(c,a),C=Y(()=>e.draggable);return Io(a,r,C),(h,i)=>(F(),X("div",{ref:m(f),class:K(m(v)),style:lt(m(p)),tabindex:"-1"},[M("header",{ref_key:"headerRef",ref:r,class:K(m(u).e("header"))},[U(h.$slots,"header",{},()=>[M("span",{role:"heading","aria-level":h.ariaLevel,class:K(m(u).e("title"))},Z(h.title),11,ts)]),h.showClose?(F(),X("button",{key:0,"aria-label":m(o)("el.dialog.close"),class:K(m(u).e("headerbtn")),type:"button",onClick:i[0]||(i[0]=l=>h.$emit("close"))},[$(m(Eo),{class:K(m(u).e("close"))},{default:P(()=>[(F(),de($t(h.closeIcon||m(s))))]),_:1},8,["class"])],10,os)):Q("v-if",!0)],2),M("div",{id:m(d),class:K(m(u).e("body"))},[U(h.$slots,"default")],10,ss),h.$slots.footer?(F(),X("footer",{key:0,class:K(m(u).e("footer"))},[U(h.$slots,"footer")],2)):Q("v-if",!0)],6))}});var rs=Fe(as,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ls=Ie({...ht,appendToBody:Boolean,beforeClose:{type:Le(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),is={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ut]:t=>Lt(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},cs=(t,e)=>{const s=Ut().emit,{nextZIndex:a}=_o();let r="";const d=Ye(),u=Ye(),p=k(!1),c=k(!1),v=k(!1),f=k(t.zIndex||a());let C,h;const i=xo("namespace",kt),l=Y(()=>{const O={},j=`--${i.value}-dialog`;return t.fullscreen||(t.top&&(O[`${j}-margin-top`]=t.top),t.width&&(O[`${j}-width`]=Re(t.width))),O}),n=Y(()=>t.alignCenter?{display:"flex"}:{});function y(){s("opened")}function g(){s("closed"),s(ut,!1),t.destroyOnClose&&(v.value=!1)}function _(){s("close")}function S(){h==null||h(),C==null||C(),t.openDelay&&t.openDelay>0?{stop:C}=Ge(()=>x(),t.openDelay):x()}function T(){C==null||C(),h==null||h(),t.closeDelay&&t.closeDelay>0?{stop:h}=Ge(()=>D(),t.closeDelay):D()}function b(){function O(j){j||(c.value=!0,p.value=!1)}t.beforeClose?t.beforeClose(O):T()}function L(){t.closeOnClickModal&&b()}function x(){oe&&(p.value=!0)}function D(){p.value=!1}function w(){s("openAutoFocus")}function R(){s("closeAutoFocus")}function A(O){var j;((j=O.detail)==null?void 0:j.focusReason)==="pointer"&&O.preventDefault()}t.lockScroll&&Bo(p);function se(){t.closeOnPressEscape&&b()}return G(()=>t.modelValue,O=>{O?(c.value=!1,S(),v.value=!0,f.value=t.zIndex?f.value++:a(),ke(()=>{s("open"),e.value&&(e.value.scrollTop=0)})):p.value&&T()}),G(()=>t.fullscreen,O=>{e.value&&(O?(r=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=r)}),J(()=>{t.modelValue&&(p.value=!0,v.value=!0,S())}),{afterEnter:y,afterLeave:g,beforeLeave:_,handleClose:b,onModalClick:L,close:T,doClose:D,onOpenAutoFocus:w,onCloseAutoFocus:R,onCloseRequested:se,onFocusoutPrevented:A,titleId:d,bodyId:u,closed:c,style:l,overlayDialogStyle:n,rendered:v,visible:p,zIndex:f}},ds=["aria-label","aria-labelledby","aria-describedby"],us=W({name:"ElDialog",inheritAttrs:!1}),fs=W({...us,props:ls,emits:is,setup(t,{expose:e}){const o=t,s=Vt();Ve({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},Y(()=>!!s.title)),Ve({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},Y(()=>!!o.customClass));const a=Oe("dialog"),r=k(),d=k(),u=k(),{visible:p,titleId:c,bodyId:v,style:f,overlayDialogStyle:C,rendered:h,zIndex:i,afterEnter:l,afterLeave:n,beforeLeave:y,handleClose:g,onModalClick:_,onOpenAutoFocus:S,onCloseAutoFocus:T,onCloseRequested:b,onFocusoutPrevented:L}=cs(o,r);rt(yt,{dialogRef:r,headerRef:d,bodyId:v,ns:a,rendered:h,style:f});const x=pt(_),D=Y(()=>o.draggable&&!o.fullscreen);return e({visible:p,dialogContentRef:u}),(w,R)=>(F(),de(Yt,{to:"body",disabled:!w.appendToBody},[$(De,{name:"dialog-fade",onAfterEnter:m(l),onAfterLeave:m(n),onBeforeLeave:m(y),persisted:""},{default:P(()=>[Wt($(m(Qo),{"custom-mask-event":"",mask:w.modal,"overlay-class":w.modalClass,"z-index":m(i)},{default:P(()=>[M("div",{role:"dialog","aria-modal":"true","aria-label":w.title||void 0,"aria-labelledby":w.title?void 0:m(c),"aria-describedby":m(v),class:K(`${m(a).namespace.value}-overlay-dialog`),style:lt(m(C)),onClick:R[0]||(R[0]=(...A)=>m(x).onClick&&m(x).onClick(...A)),onMousedown:R[1]||(R[1]=(...A)=>m(x).onMousedown&&m(x).onMousedown(...A)),onMouseup:R[2]||(R[2]=(...A)=>m(x).onMouseup&&m(x).onMouseup(...A))},[$(m(Go),{loop:"",trapped:m(p),"focus-start-el":"container",onFocusAfterTrapped:m(S),onFocusAfterReleased:m(T),onFocusoutPrevented:m(L),onReleaseRequested:m(b)},{default:P(()=>[m(h)?(F(),de(rs,Kt({key:0,ref_key:"dialogContentRef",ref:u},w.$attrs,{"custom-class":w.customClass,center:w.center,"align-center":w.alignCenter,"close-icon":w.closeIcon,draggable:m(D),fullscreen:w.fullscreen,"show-close":w.showClose,title:w.title,"aria-level":w.headerAriaLevel,onClose:m(g)}),Ht({header:P(()=>[w.$slots.title?U(w.$slots,"title",{key:1}):U(w.$slots,"header",{key:0,close:m(g),titleId:m(c),titleClass:m(a).e("title")})]),default:P(()=>[U(w.$slots,"default")]),_:2},[w.$slots.footer?{name:"footer",fn:P(()=>[U(w.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):Q("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ds)]),_:3},8,["mask","overlay-class","z-index"]),[[zt,m(p)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var ps=Fe(fs,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const ms=So(ps);var ue,fe;class vs{constructor(e,o,s){E(this,"moveState",{forward:!1,backward:!1,left:!1,right:!1,playerIsOnGround:!0});E(this,"playerVelocity",new z);E(this,"player");E(this,"temp",{upVector:new z(0,1,0),tempVector:new z,tempVector2:new z,tempBox:new to,tempMat:new Be,tempSegment:new Ke});E(this,"params",{playerSpeed:12,gravity:-50});E(this,"controls");E(this,"camera");E(this,"capsuleInfo",{radius:1,segment:new Ke(new z,new z(0,-5,0))});I(this,ue,e=>{const{moveState:o}=this;switch(e.code){case"KeyW":case"ArrowUp":o.forward=!0;break;case"KeyS":case"ArrowDown":o.backward=!0;break;case"KeyA":case"ArrowLeft":o.left=!0;break;case"KeyD":case"ArrowRight":o.right=!0;break;case"Space":o.playerIsOnGround&&(this.playerVelocity.y=20,o.playerIsOnGround=!1)}});I(this,fe,e=>{const{moveState:o}=this;switch(e.code){case"KeyW":case"ArrowUp":o.forward=!1;break;case"KeyS":case"ArrowDown":o.backward=!1;break;case"KeyA":case"ArrowLeft":o.left=!1;break;case"KeyD":case"ArrowRight":o.right=!1;break}});E(this,"reset",()=>{const{playerVelocity:e,player:o,camera:s,controls:a}=this;e.set(0,0,0),o.position.set(0,5,0),s.position.sub(a.target),a.target.copy(o.position),s.position.add(o.position),a.update()});te("keydown",ne(this,ue)),te("keyup",ne(this,fe)),this.player=e,this.controls=o,this.camera=s}updatePlayer(e,o){const{playerVelocity:s,player:a,params:r,controls:d,camera:u}=this,{playerIsOnGround:p,forward:c,backward:v,right:f,left:C}=this.moveState,{upVector:h,tempVector:i}=this.temp;p?s.y=e*r.gravity:s.y+=e*r.gravity,a.position.addScaledVector(s,e);const l=d.getAzimuthalAngle();c&&(i.set(0,0,-1).applyAxisAngle(h,l),a.position.addScaledVector(i,r.playerSpeed*e)),v&&(i.set(0,0,1).applyAxisAngle(h,l),a.position.addScaledVector(i,r.playerSpeed*e)),C&&(i.set(-1,0,0).applyAxisAngle(h,l),a.position.addScaledVector(i,r.playerSpeed*e)),f&&(i.set(1,0,0).applyAxisAngle(h,l),a.position.addScaledVector(i,r.playerSpeed*e)),a.updateMatrixWorld();const{tempBox:n,tempMat:y,tempSegment:g,tempVector2:_}=this.temp,S=this.capsuleInfo;n.makeEmpty(),y.copy(o.matrixWorld).invert(),g.copy(S.segment),g.start.applyMatrix4(a.matrixWorld).applyMatrix4(y),g.end.applyMatrix4(a.matrixWorld).applyMatrix4(y),n.expandByPoint(g.start),n.expandByPoint(g.end),n.min.addScalar(-S.radius),n.max.addScalar(S.radius),o.geometry.boundsTree.shapecast({intersectsBounds:x=>x.intersectsBox(n),intersectsTriangle:x=>{const D=i,w=_,R=x.closestPointToSegment(g,D,w);if(R<S.radius){const A=S.radius-R,se=w.sub(D).normalize();g.start.addScaledVector(se,A),g.end.addScaledVector(se,A)}}});const T=i;T.copy(g.start).applyMatrix4(o.matrixWorld);const b=_;b.subVectors(T,a.position),this.moveState.playerIsOnGround=b.y>Math.abs(e*s.y*.25);const L=Math.max(0,b.length()-1e-5);b.normalize().multiplyScalar(L),a.position.add(b),p?s.set(0,0,0):(b.normalize(),s.addScaledVector(b,-b.dot(s))),u.position.sub(d.target),d.target.copy(a.position),u.position.add(a.position),a.position.y<-25&&this.reset()}get isMoving(){const{forward:e,backward:o,left:s,right:a,playerIsOnGround:r}=this.moveState;return e||o||s||a||!r}}ue=new WeakMap,fe=new WeakMap;const ys=[new URL("/WebglStudy/assets/1-91d1fd28.png",self.location).href,new URL("/WebglStudy/assets/2-577e2981.png",self.location).href,new URL("/WebglStudy/assets/3-e96f4416.jpg",self.location).href,new URL("/WebglStudy/assets/4-2c59a331.jpg",self.location).href,new URL("/WebglStudy/assets/5-c8aed110.png",self.location).href,new URL("/WebglStudy/assets/6-9d09d2dc.png",self.location).href,new URL("/WebglStudy/assets/7-68ca4bc6.png",self.location).href,new URL("/WebglStudy/assets/8-74f5f15e.jpg",self.location).href,new URL("/WebglStudy/assets/9-44142f78.jpg",self.location).href,new URL("/WebglStudy/assets/10-1cde4a43.png",self.location).href],Ae={1:{title:"《小橘贝》",author:"小雅",describe:`
		它站在画面中央，静静地凝视着观众，柔和的橘色将它的柔软毛发和灵动眼眸妩媚地勾勒出来。<br>
		小猫的小耳朵微微竖起，似乎在倾听着什么，身体略微前倾，展现出它对周围世界的好奇和敏感。<br>
		画面的背景色以淡蓝色为主，这种色彩营造了温馨轻柔的氛围，让人仿佛置身于阳光明媚的午后时光中。<br>
		整个画作细致精致、色彩明亮而温暖，带给人们一种温馨、亲切的感受。
		`},2:{title:"《微光》",author:"小雅",describe:`
		微小的星光和银河组成了一个神秘的宇宙世界，让人感到无限的遐想和想象。<br>
		当你凝视着这幅画时，你会感受到无边无际的深邃和宁静。<br>
		你仿佛置身于一个没有噪音、没有烦扰的夜空中。在这个宁静的空间里，你可以看到银河中微光闪烁的样子。<br>
		这些微光似乎是夜空中唯一的生命体，它们微弱却坚定地发出光芒，点亮着整个银河系。<br>
		这些微光是如此的纤细而又强大，仿佛在无边的黑暗中，只有它们才能给人带来希望和力量。
		`},3:{title:"《天鹅》",author:"小雅",describe:`
		湖面静谧如镜，微风拂过，泛起一圈圈细微的涟漪，仿佛为优雅的白色天鹅们铺上了一层晶莹剔透的纱帐。<br>
		其中一只白羽如雪的天鹅在水中自由自在地舞动着优美的姿态，如同一位华丽的舞者在水上翩翩起舞。<br>
		纯白色羽毛在阳光的照射下，闪烁着淡淡的光晕，如同珍珠一般璀璨夺目。
		`},4:{title:"《山中小屋》",author:"小雅",describe:`
		宁静而恬淡，远山隐现于云雾中，仿佛是一幅梦幻般的画卷。<br>
		小屋在山脚下宁静地伫立，墙体洁白，屋顶泛着淡淡的阳光，使得小屋与周围的环境相互映衬。<br>
		流露出一种自然的和谐之美。
		`},5:{title:"《太空人》",author:"小雅",describe:`
		太空人身披着黑夜在星罗棋布的宇宙中漫游。<br>
		虽说现在已经是太空时代，人类早就可以坐太空飞船去月球，<br>
		但却永远无法探索别人内心的宇宙。
		`},6:{title:"《粉色海洋》",author:"小雅",describe:`
		粉色云朵蓬松如棉花糖展开眼前，弯月微笑在缝隙间，月光柔和，清雅动人。<br>
		紫色天空如梦，星辉闪烁，默默倾听，轻轻地，微风拂面，悄悄地，生命在流动。
		`},7:{title:"《风平浪静》",author:"小雅",describe:`
		撑一条船，离开岸边一百米，风平浪静，彩霞慢慢淡下去。<br>
		撑一条船，离开岸边两百米，风平浪静，夜晚轻轻呼唤你。<br>
		撑一条船，离开岸边三百米，风平浪静，大鱼笑我傻兮兮。<br>
		撑一条船 离开岸边四百米，风平浪静，星儿闪闪笑眯眯。<br>
		撑一条船 离开岸边五百米，风平浪静，海龟向我挥手臂。
		`},8:{title:"《向日葵》",author:"小雅",describe:`
		阳光照耀，金黄的花盘。<br>
		宛如一盏明灯，指引前行。<br>
		向日葵，你是信仰，你是力量，你是光辉，你是坚毅，你是忠诚，你是爱慕，你是美丽。
		`},9:{title:"《花·虎·蝶》",author:"小雅",describe:`
		一段奇妙的相遇，是自由和勇气的结合，是一份神秘而又动人的韵味。<br>
		在这片色彩斑斓的花海之中，一只带着蝴蝶翅膀的老虎，骑着踏板车，<br>
		它像是一道闪电，划破了这片美好的天地。<br>
		翅膀轻轻地振动，仿佛随时可以飞离这片美好的天地，飞向更广阔的天空。
		`},10:{title:"《豚》",author:"小雅",describe:`
		所有的转折隐藏在密集的鸟群中，天空与海洋都无法察觉，怀着美梦却可以看见。<br>
		摸索颠倒的一瞬间，所有的怀念隐藏在相似的日子里，心里的蜘蛛模仿人类张灯结彩
		`}},B={width:window.innerWidth,height:window.innerHeight},Me=k();var pe,gt,me,bt,ve,wt,ye,Et,he,St;class hs{constructor(e){I(this,pe);I(this,me);I(this,ve);I(this,ye);I(this,he);E(this,"loader",new bo);E(this,"textureLoader",new oo);E(this,"collisionScene");E(this,"textureBoards",{});E(this,"galleryBoards",{});E(this,"raycastObjects",[]);E(this,"loaded",k(!1));E(this,"scene");E(this,"loadingState",{loaded:[],total:[],progress:k(0)});this.scene=e,V(this,he,St).call(this),V(this,me,bt).call(this);const o=[V(this,pe,gt).call(this),V(this,ve,wt).call(this)];Promise.all(o).then(()=>{V(this,ye,Et).call(this),this.loaded.value=!0})}}pe=new WeakSet,gt=function(){const{loader:e,scene:o}=this;return new Promise((s,a)=>{e.load("model/scene_collision.glb",r=>{const d=r.scene;d.updateMatrixWorld(!0),this.collisionScene=d,d.traverse(c=>{(c.name==="home001"||c.name==="PointLight")&&(c.castShadow=!0),c.name.includes("PointLight")&&c instanceof so&&(c.intensity*=2e3),c.name==="home002"&&(c.castShadow=!0,c.receiveShadow=!0),c instanceof ee&&/gallery.*_board/.test(c.name)&&(this.galleryBoards[c.name]=c,this.raycastObjects.push(c))});const u=new Jt(this.collisionScene);u.attributes=["position"];const p=u.generate();p.boundsTree=new Qt(p),Me.value=new ee(p),o.add(d),s(r)},r=>{const{loaded:d,total:u,progress:p}=this.loadingState;d[0]=r.loaded,u[0]=r.total,p.value=d.reduce((c,v)=>c+v,0)/u.reduce((c,v)=>c+v,0)})})},me=new WeakSet,bt=function(){const{loader:e,scene:o}=this;return new Promise(s=>{e.load("model/scene_desk_obj.glb",a=>{const r=a.scene;o.add(r),s(a)},a=>{const{loaded:r,total:d,progress:u}=this.loadingState;r[1]=a.loaded,d[1]=a.total,u.value=r.reduce((p,c)=>p+c,0)/d.reduce((p,c)=>p+c,0)})})},ve=new WeakSet,wt=async function(){const{textureLoader:e,textureBoards:o}=this,s=[];function a(r){r.colorSpace=it;const d=r.image.width/r.image.height;let u=1,p=1;d>1?u=1/d:p=d,r.offset.set(.5-u/2,.5-p/2),r.repeat.set(u,p)}for(const[r,d]of ys.entries()){const u=new Promise(p=>{e.load(d,c=>{a(c),o[r+1]=c,p(c)})});s.push(u)}return await Promise.all(s),o},ye=new WeakSet,Et=function(){const{textureBoards:e,galleryBoards:o}=this;for(const s in e){const a=o[`gallery${s}_board`],r=a.material;r.map=e[s],a.userData={name:a.name,title:Ae[s].title,author:Ae[s].author,describe:Ae[s].describe,index:s,src:e[s].image.src,show_boards:!0},[4,5,6,7,9].includes(+s)&&(a.rotation.y=-Math.PI/2),+s==8&&(a.rotation.y=Math.PI)}},he=new WeakSet,St=function(){const e=new wo(new Pe(100,100),{textureWidth:B.width*window.devicePixelRatio,textureHeight:B.height*window.devicePixelRatio,color:16777215});e.material instanceof no&&(e.material.transparent=!0,e.material.fragmentShader=e.material.fragmentShader.replace("gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 )","gl_FragColor = vec4( blendOverlay( base.rgb, color ), 0.1 )")),e.rotation.x=-Math.PI/2,this.scene.add(e)};class gs{constructor(e){E(this,"camera");E(this,"hoverPoint",new He(0,0));E(this,"tooltipRaycaster",new ze);E(this,"raycastObjects",[]);E(this,"bindClickRayCastObj",(e=[],o)=>{let s=0,a=0;te("mousedown",r=>{s=r.screenX,a=r.screenY}),this.raycastObjects=e,te("mouseup",r=>{const d=Math.abs(r.screenX-s),u=Math.abs(r.screenY-a);if(d>1||u>1)return;const p=new He(r.clientX/B.width*2-1,1-r.clientY/B.height*2),c=new ze;c.far=18,c.setFromCamera(p,this.camera);const v=c.intersectObjects(e);v.length&&o(v[0].object)})});this.camera=e,this.tooltipRaycaster.far=15}updateTooltipRayCast(e,o){if(this.raycastObjects.length){this.tooltipRaycaster.setFromCamera(this.hoverPoint,this.camera);const s=this.tooltipRaycaster.intersectObjects(this.raycastObjects);s.length&&s[0].object.userData.title?e(s[0].object):o()}}}const bs={class:"tracking-wider select-none",text:"white"},ws={class:"fixed bottom-190px left-1/2 -translate-x-1/2 leading-40px px-20px rounded bg-black/40"},Es=M("footer",{class:"fixed bottom-20px left-1/2 -translate-x-1/2 leading-40px rounded bg-black/40 w-50vw text-center"},"Tips：点击此画可查看详情",-1),Ss=W({__name:"Tip",props:{title:{}},setup(t){return(e,o)=>(F(),X("div",bs,[M("header",ws,Z(e.title),1),Es]))}}),Cs={class:"flex justify-between gap-x-40px tracking-wider leading-32px",text:"16px white"},_s={class:"font-bold",text:"20px"},xs=["innerHTML"],Ts=["src"],As=W({__name:"Detail",props:{data:{}},setup(t){return(e,o)=>(F(),X("div",Cs,[M("aside",null,[M("header",_s,Z(e.data.title),1),M("p",null,"作者："+Z(e.data.author),1),M("footer",{class:"text-justify leading-40px",innerHTML:e.data.describe},null,8,xs)]),M("img",{src:e.data.src,alt:"",class:"w-670px h-500px"},null,8,Ts)]))}}),st=new z,Ls=new ro,nt=new z;class ks extends ao{constructor(e=document.createElement("div")){super(),this.isCSS3DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(o){o.element instanceof Element&&o.element.parentNode!==null&&o.element.parentNode.removeChild(o.element)})})}copy(e,o){return super.copy(e,o),this.element=e.element.cloneNode(!0),this}}const N=new Be,Ds=new Be;class Rs{constructor(e={}){const o=this;let s,a,r,d;const u={camera:{fov:0,style:""},objects:new WeakMap},p=e.element!==void 0?e.element:document.createElement("div");p.style.overflow="hidden",this.domElement=p;const c=document.createElement("div");c.style.transformOrigin="0 0",c.style.pointerEvents="none",p.appendChild(c);const v=document.createElement("div");v.style.transformStyle="preserve-3d",c.appendChild(v),this.getSize=function(){return{width:s,height:a}},this.render=function(l,n){const y=n.projectionMatrix.elements[5]*d;u.camera.fov!==y&&(c.style.perspective=n.isPerspectiveCamera?y+"px":"",u.camera.fov=y),n.view&&n.view.enabled?(c.style.transform=`translate( ${-n.view.offsetX*(s/n.view.width)}px, ${-n.view.offsetY*(a/n.view.height)}px )`,c.style.transform+=`scale( ${n.view.fullWidth/n.view.width}, ${n.view.fullHeight/n.view.height} )`):c.style.transform="",l.matrixWorldAutoUpdate===!0&&l.updateMatrixWorld(),n.parent===null&&n.matrixWorldAutoUpdate===!0&&n.updateMatrixWorld();let g,_;n.isOrthographicCamera&&(g=-(n.right+n.left)/2,_=(n.top+n.bottom)/2);const S=n.view&&n.view.enabled?n.view.height/n.view.fullHeight:1,b=(n.isOrthographicCamera?`scale( ${S} )scale(`+y+")translate("+f(g)+"px,"+f(_)+"px)"+C(n.matrixWorldInverse):`scale( ${S} )translateZ(`+y+"px)"+C(n.matrixWorldInverse))+"translate("+r+"px,"+d+"px)";u.camera.style!==b&&(v.style.transform=b,u.camera.style=b),i(l,l,n)},this.setSize=function(l,n){s=l,a=n,r=s/2,d=a/2,p.style.width=l+"px",p.style.height=n+"px",c.style.width=l+"px",c.style.height=n+"px",v.style.width=l+"px",v.style.height=n+"px"};function f(l){return Math.abs(l)<1e-10?0:l}function C(l){const n=l.elements;return"matrix3d("+f(n[0])+","+f(-n[1])+","+f(n[2])+","+f(n[3])+","+f(n[4])+","+f(-n[5])+","+f(n[6])+","+f(n[7])+","+f(n[8])+","+f(-n[9])+","+f(n[10])+","+f(n[11])+","+f(n[12])+","+f(-n[13])+","+f(n[14])+","+f(n[15])+")"}function h(l){const n=l.elements;return"translate(-50%,-50%)"+("matrix3d("+f(n[0])+","+f(n[1])+","+f(n[2])+","+f(n[3])+","+f(-n[4])+","+f(-n[5])+","+f(-n[6])+","+f(-n[7])+","+f(n[8])+","+f(n[9])+","+f(n[10])+","+f(n[11])+","+f(n[12])+","+f(n[13])+","+f(n[14])+","+f(n[15])+")")}function i(l,n,y,g){if(l.isCSS3DObject){const _=l.visible===!0&&l.layers.test(y.layers)===!0;if(l.element.style.display=_===!0?"":"none",_===!0){l.onBeforeRender(o,n,y);let S;l.isCSS3DSprite?(N.copy(y.matrixWorldInverse),N.transpose(),l.rotation2D!==0&&N.multiply(Ds.makeRotationZ(l.rotation2D)),l.matrixWorld.decompose(st,Ls,nt),N.setPosition(st),N.scale(nt),N.elements[3]=0,N.elements[7]=0,N.elements[11]=0,N.elements[15]=1,S=h(N)):S=h(l.matrixWorld);const T=l.element,b=u.objects.get(l);if(b===void 0||b.style!==S){T.style.transform=S;const L={style:S};u.objects.set(l,L)}T.parentNode!==v&&v.appendChild(T),l.onAfterRender(o,n,y)}}for(let _=0,S=l.children.length;_<S;_++)i(l.children[_],n,y)}}}var ge,Ct,be,_t,we,xt;class Ms{constructor(e){I(this,ge);I(this,be);I(this,we);E(this,"cssScene");E(this,"scene");E(this,"cssRenderer");E(this,"update",e=>{this.cssRenderer.render(this.cssScene,e)});E(this,"dispose",()=>{this.cssScene.traverse(e=>{e.material&&e.material.dispose(),e.geometry&&e.geometry.dispose(),e.dispose&&e.dispose(),e=null}),this.cssScene.clear()});this.cssScene=new ct,this.scene=e,this.cssRenderer=new Rs,V(this,ge,Ct).call(this),V(this,be,_t).call(this),V(this,we,xt).call(this)}}ge=new WeakSet,Ct=function(){const{cssRenderer:e}=this;e.setSize(B.width,B.height),e.domElement.style.position="absolute",e.domElement.style.top="0px",e.domElement.style.zIndex="-1",document.body.appendChild(e.domElement)},be=new WeakSet,_t=function(){te("resize",()=>{this.cssRenderer.setSize(B.width,B.height)})},we=new WeakSet,xt=function(){const e=new Pe(1.5,1.3),o=new lo({color:0,side:io,transparent:!0,opacity:0,blending:co}),s=new ee(e,o);s.position.set(-15.55,5.5,36.33),s.rotation.set(0,Math.PI/2,0),this.scene.add(s);const a=document.createElement("iframe");a.src="/universe/index.html",a.style.width="1200px",a.style.height="900px",a.style.boxSizing="border-box",a.style.opacity="1";const r=new ks(a);r.position.copy(s.position),r.rotation.copy(s.rotation),r.scale.set(.002,.002,.002),this.cssScene.add(r)};var Ee;class Os{constructor(e,o){E(this,"scene");E(this,"camera");E(this,"sound");I(this,Ee,()=>{const e=new uo;this.camera.add(e);const o=new fo(e);this.sound=o,new po().load("https://ws.stream.qqmusic.qq.com/C400002b58Uc1ujQre.m4a?guid=637115780&vkey=F118885DF2C776D7264A09A3DC8DE223CE1C6EBA576444DF495A7B1122AB746DD97A7A8F8B9AF11434631F0606D24DD2D0AA2D1738D8A813&uin=&fromtag=120032",r=>{o.setBuffer(r),o.setRefDistance(20),o.setDirectionalCone(180,230,.5),o.setLoop(!0)});const a=new ee(new Pe(1,1),new dt({color:16711680}));a.position.set(-15.9,4.49,36.42),a.visible=!1,this.scene.add(a),a.add(o)});E(this,"play",()=>{this.sound.play()});E(this,"pause",()=>{this.sound.pause()});this.scene=e,this.camera=o,ne(this,Ee).call(this)}}Ee=new WeakMap;const Is={class:"fixed left-20px top-20px"},Bs={key:0,class:"loading-text fixed inset-0 grid place-items-center",text:"120px"},Ps=W({__name:"Index",setup(t){const e=new ct,o=new mo(55,B.width/B.height,.1,1e3);o.position.set(0,0,3);const s=new vo({antialias:!0});s.setSize(B.width,B.height),s.setPixelRatio(window.devicePixelRatio),s.shadowMap.enabled=!0,s.outputColorSpace=it,s.toneMapping=yo;const a=jt();J(()=>{a.value.appendChild(s.domElement)});const r=new Zt(o,s.domElement);r.minDistance=1e-4,r.maxDistance=1e-4;const d=new hs(e),u=new gs(o);G(d.loaded,b=>{b&&u.bindClickRayCastObj(d.raycastObjects,T)});const p=new ee(new eo(.5,2.5,.5,10,1),new dt({color:255}));p.geometry.translate(0,-.25,0),e.add(p);const c=new Ms(e),v=new vs(p,r,o);v.reset();const f=new Os(e,o),C=k(!1);function h(){C.value=!C.value,C.value?f.play():f.pause()}const i=new ho;s.setAnimationLoop(()=>{s.render(e,o),r.update();const b=Math.min(i.getDelta(),.05);Me.value&&v.updatePlayer(b,Me.value),v.isMoving&&u.updateTooltipRayCast(n,y),c.update(o)});const l=k();function n(b){l.value=b.userData.title}function y(){l.value=null}const g=Y(()=>d.loadingState.progress.value<1),_=k(!1),S=k();function T(b){S.value=b.userData,_.value=!_.value}return Gt(()=>{go(e,s),c.dispose()}),(b,L)=>{const x=Mt,D=ms;return F(),X(Xt,null,[M("div",{ref_key:"containerRef",ref:a},null,512),M("div",Is,[$(x,{type:"primary",onClick:h},{default:P(()=>[qt(Z(m(C)?"暂停音乐":"播放音乐"),1)]),_:1})]),$(De,{appear:"",name:"fade"},{default:P(()=>[m(g)?(F(),X("div",Bs,Z(Math.floor(m(d).loadingState.progress.value*100))+"% ",1)):Q("",!0)]),_:1}),$(De,{appear:"",name:"fade"},{default:P(()=>[m(l)?(F(),de(Ss,{key:0,title:m(l)},null,8,["title"])):Q("",!0)]),_:1}),$(D,{modelValue:m(_),"onUpdate:modelValue":L[0]||(L[0]=w=>at(_)?_.value=w:null),width:"70vw",class:"!bg-black !rounded-20px"},{default:P(()=>[$(As,{data:m(S)},null,8,["data"])]),_:1},8,["modelValue"])],64)}}});const en=Do(Ps,[["__scopeId","data-v-5713154c"]]);export{en as default};
