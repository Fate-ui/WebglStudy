import{S as U,F as J,P as K,V as c,W as O,T as w,g as G,b as _,B as Q,a as X,o as Y,c as $,i as W,j as ee,k as te,p as oe,d as ne,q as se,r as ae,s as ie,t as re,u as L,f as de,D as ce,v as A}from"./three.module-60f4cea7.js";import{d as he,s as le,l as pe,o as ue,c as we}from"./index-2404ab28.js";import{_ as ge}from"./_plugin-vue_export-helper-c27b6911.js";const me="/WebglStudy/assets/earth-b01a299a.jpg",fe="/WebglStudy/assets/star1-e560cfcd.png",_e="/WebglStudy/assets/star2-d0154e22.png",Se="/WebglStudy/assets/cloud-feeb4763.png",Me="/WebglStudy/assets/starry-6de0c992.png",R=45,ve=he({__name:"2.星云",setup(be){const i=new U;i.fog=new J(0,0,1e4);const g={width:window.innerWidth,height:window.innerHeight,depth:1200},e={...g};let d=0;const h=new K(R,e.width/e.height,.1,1e4);h.position.set(...S());function S(){const t=new c;return d=Math.floor(e.height/2/Math.tan(R/2/180*Math.PI)-e.depth/2),t.setZ(d),t.toArray()}window.addEventListener("resize",()=>{const[t,n]=[g.width,g.height];e.width=window.innerWidth,e.height=window.innerHeight,l.setSize(e.width,e.height),h.aspect=e.width/e.height,h.position.set(...S()),h.updateProjectionMatrix(),b.scale.set(e.width/t,e.height/n,1)});const l=new O({antialias:!0});l.setSize(e.width,e.height),l.setPixelRatio(window.devicePixelRatio);const M=le();pe(()=>{M.value.appendChild(l.domElement)});const v=new w().load(Me);v.colorSpace=G;const b=new _(new Q(e.width,e.height,e.depth),new X({side:Y,map:v}));i.add(b);const y=new w().load(me);y.colorSpace=G;const m=new _(new $(50,32,16),new W({map:y,shininess:100}));m.position.set(-200,160,-400),i.add(m),i.add(new ee(16777215,1));const u=new te(415229,1e6,0);u.power=1e6,u.position.set(0,0,70),u.position.set(-140,160,-300),i.add(u);const x=[{color:{h:.6,s:100,l:.75},img:fe},{color:{h:.3,s:50,l:.8},img:_e}],P=[];function z(t){const n=new ne,s=[];for(let o=0;o<1500;o++){const r=A.randFloatSpread(e.width),Z=Math.random()*(e.height/2),N=A.randFloat(-e.depth/2,d);s.push(r,Z,N)}n.setAttribute("position",new se(s,3));const a=new ae,p=new w;for(const o of x){const r=new ie(n,new re({size:16,depthTest:!0,map:p.load(o.img),transparent:!0,blending:L}));r.material.color.setHSL(o.color.h,o.color.s,o.color.l),r.rotation.set(Math.random()*.2-.15,Math.random()*.2-.15,Math.random()*.2-.15),a.add(r),P.push(r)}return a.position.set(0,0,t),i.add(a),a}const f=-d-e.depth/2,k=z(f),H=z(f*2);function T(){[k,H].forEach((t,n)=>{const s=Date.now()*5e-4;for(const[a,p]of x.entries()){const o=p.color,r=360*(o.h+s)%360/360;P[a].material.color.setHSL(Number.parseFloat(r.toFixed(2)),o.s,o.l)}t.position.z>d+e.depth/2&&(t.position.z=f),t.position.z+=7})}function B(t,n){const s=new _(new de(t,n),new W({map:new w().load(Se),transparent:!0,depthTest:!1,side:ce,blending:L}));return i.add(s),s}const E=[new c(-e.width/10,0,-e.depth/2),new c(-e.width/4,e.height/8,0),new c(-e.width/4,0,d)],j=[new c(e.width/8,e.height/8,-e.depth/2),new c(e.width/8,e.height/8,d)],D=B(300,200),I=C(D,E,.001),q=B(100,100),V=C(q,j,.005);function C(t,n,s){let a=0;const p=new oe(n);return()=>{const o=p.getPoint(a%1);t.position.set(...o.toArray()),a+=s}}function F(){m.rotation.y+=.008,T(),I(),V(),l.render(i,h),requestAnimationFrame(F)}return F(),(t,n)=>(ue(),we("div",{ref_key:"containerRef",ref:M},null,512))}});const ze=ge(ve,[["__scopeId","data-v-42d368c8"]]);export{ze as default};
