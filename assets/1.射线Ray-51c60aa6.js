import{S as B,P as M,W as E,G as S,A as $,V as w,R as k,d as P,H,I as A,s as L,t as V,b as W,a as I}from"./three.module-cb7ba46f.js";import{a as O}from"./index-d7fe2d6f.js";import{O as X}from"./OrbitControls-7501b747.js";import{G as Y}from"./dat.gui.module-5ea4ba08.js";import{d as Z}from"./index-1a26f821.js";import{d as D,s as J,l as N,k as j,p as q,o as K,c as Q,h as y,t as ee,a as F,F as te}from"./index-7aa26047.js";const ne={class:"fixed top-20px left-20px bg-white w-150px py-10px rounded-3px",text:"center"},oe=y("header",{class:"font-bold"},"相交点",-1),ue=D({__name:"1.射线Ray",setup(se){const h={width:window.innerWidth,height:window.innerHeight},c=new B,b=new M(45,h.width/h.height,1,1e4);b.position.set(3,10,10);const p=new E({antialias:!0});p.setSize(h.width,h.height),p.setPixelRatio(window.devicePixelRatio);const v=J();N(()=>{v.value.appendChild(p.domElement)}),c.add(new S(10)),c.add(new $(3));const R=new X(b,p.domElement),u=new w(0,0,0),f=new w(0,1,1),t=new k(u,f.clone()),s=new w(-3,0,3),a=new w(3,0,3),r=new w(0,3,3),_=[s,a,r],l=new P().setFromPoints([u,f]),G=new H(l,new A({color:16711935}));c.add(G);const i=new P().setFromPoints(_),T=new L(i,new V({color:16711680})),U=new W(i,new I({color:65280,transparent:!0,opacity:.5}));c.add(T,U);const n=new w,d=j();d.value=t.intersectTriangle(s,a,r,!1,n),O(()=>{p.render(c,b),R.update()});const x=new Y,z=x.addFolder("三角形点位");z.open(),_.forEach((e,o)=>{const m=z.addFolder(`点${o+1}`);m.open(),m.add(e,"x",-10,10,.1).onChange(()=>{i.attributes.position.setX(o,e.x),i.attributes.position.needsUpdate=!0,d.value=t.intersectTriangle(s,a,r,!1,n)}),m.add(e,"y",-10,10,.1).onChange(()=>{i.attributes.position.setY(o,e.y),i.attributes.position.needsUpdate=!0,d.value=t.intersectTriangle(s,a,r,!1,n)}),m.add(e,"z",-10,10,.1).onChange(()=>{i.attributes.position.setZ(o,e.z),i.attributes.position.needsUpdate=!0,d.value=t.intersectTriangle(s,a,r,!1,n)})});const C=x.addFolder("射线");C.open();const g=C.addFolder("起点");return g.open(),[u,f].forEach((e,o)=>{g.add(e,"x",-10,10,.1).onChange(()=>{l.attributes.position.setX(o,e.x),l.attributes.position.needsUpdate=!0,t.set(u,f.clone().normalize()),d.value=t.intersectTriangle(s,a,r,!1,n)}),g.add(e,"y",-10,10,.1).onChange(()=>{l.attributes.position.setY(o,e.y),l.attributes.position.needsUpdate=!0,t.set(u,f.clone().normalize()),d.value=t.intersectTriangle(s,a,r,!1,n)}),g.add(e,"z",-10,10,.1).onChange(()=>{l.attributes.position.setZ(o,e.z),l.attributes.position.needsUpdate=!0,t.set(u,f.clone().normalize()),d.value=t.intersectTriangle(s,a,r,!1,n)})}),q(()=>{Z(c,p),x.destroy()}),(e,o)=>(K(),Q(te,null,[y("div",{ref_key:"containerRef",ref:v},null,512),y("div",ne,[oe,y("span",null,ee(d.value?`x:${F(n).x.toFixed(2)} y:${F(n).y.toFixed(2)} z:${F(n).z.toFixed(2)}`:"无"),1)])],64))}});export{ue as default};
