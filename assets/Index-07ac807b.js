var At=Object.defineProperty;var Lt=(t,e,o)=>e in t?At(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var E=(t,e,o)=>(Lt(t,typeof e!="symbol"?e+"":e,o),o),$e=(t,e,o)=>{if(!e.has(t))throw TypeError("Cannot "+o)};var se=(t,e,o)=>($e(t,e,"read from private field"),o?o.call(t):e.get(t)),O=(t,e,o)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,o)};var U=(t,e,o)=>($e(t,e,"access private method"),o);import{a as Me,b as Oe,d as Le,j as Dt,g as kt}from"./base-c41f6dc2.js";import{v as Rt}from"./el-loading-18d38897.js";import{i as Mt,C as Ot,u as Ue,E as It}from"./el-button-5d261aa4.js";import{a3 as Pt,l as Z,a4 as Bt,a5 as Se,P as nt,a6 as Ft,E as G,S as Nt,O as _e,k as D,d as V,M as at,a as m,H as $,_ as De,y as $t,q as W,X as Ut,D as We,f as z,o as B,c as X,h as I,I as K,t as J,w as N,i as ce,J as Wt,K as de,x as rt,C as Vt,G as Kt,v as lt,L as Ht,a7 as Yt,Y as zt,Z as it,a8 as jt,s as Gt,p as Xt,F as qt,j as Zt}from"./index-6274213e.js";import{O as Jt}from"./OrbitControls-88168f55.js";import{S as Qt,M as eo,R as to}from"./StaticGeometryGenerator-b0d7a8a5.js";import{V as Y,y as oo,M as Ie,aT as Ve,T as so,aU as no,b as Q,f as Pe,$ as ao,g as ct,K as Ke,J as He,O as ro,a2 as lo,S as dt,a8 as io,D as co,Y as uo,aV as fo,aW as po,aX as mo,a as ut,P as vo,W as yo,a5 as ho,E as go}from"./three.module-34ff84d8.js";import{d as bo}from"./index-1a26f821.js";import{u as ee}from"./index-54a5feab.js";import{G as wo}from"./GLTFLoader-85f5323f.js";import{R as Eo}from"./Reflector-b2d91cfe.js";import{E as So}from"./index-af53a953.js";import{_ as Be,d as Ye,w as Co}from"./use-form-item-8e21627b.js";import{b as _o,c as xo,u as To}from"./use-global-config-186efb24.js";import{b as te,a as ke,h as ze,g as Ao,c as Lo,r as Do,u as je}from"./style-c410ef6c.js";import{t as ko,U as ft}from"./event-2c073216.js";import{_ as Ro}from"./_plugin-vue_export-helper-c27b6911.js";function Mo(t){return t==null}let ne;const Oo=t=>{var e;if(!te)return 0;if(ne!==void 0)return ne;const o=document.createElement("div");o.className=`${t}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const s=o.offsetWidth;o.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",o.appendChild(a);const r=a.offsetWidth;return(e=o.parentNode)==null||e.removeChild(o),ne=s-r,ne},Io=(...t)=>e=>{t.forEach(o=>{Pt(o)?o(e):o.value=e})},pt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};var ie=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(ie||{});const Po=(t,e,o)=>{let s={offsetX:0,offsetY:0};const a=u=>{const p=u.clientX,c=u.clientY,{offsetX:v,offsetY:f}=s,C=t.value.getBoundingClientRect(),h=C.left,i=C.top,l=C.width,n=C.height,y=document.documentElement.clientWidth,g=document.documentElement.clientHeight,_=-h+v,S=-i+f,T=y-h-l+v,b=g-i-n+f,L=k=>{const w=Math.min(Math.max(v+k.clientX-p,_),T),R=Math.min(Math.max(f+k.clientY-c,S),b);s={offsetX:w,offsetY:R},t.value.style.transform=`translate(${ke(w)}, ${ke(R)})`},x=()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",x)},r=()=>{e.value&&t.value&&e.value.addEventListener("mousedown",a)},d=()=>{e.value&&t.value&&e.value.removeEventListener("mousedown",a)};Z(()=>{Bt(()=>{o.value?r():d()})}),Se(()=>{d()})},Bo=(t,e={})=>{nt(t)||ko("[useLockscreen]","You need to pass a ref param to this function");const o=e.ns||Me("popup"),s=Ft(()=>o.bm("parent","hidden"));if(!te||ze(document.body,s.value))return;let a=0,r=!1,d="0";const u=()=>{setTimeout(()=>{Do(document==null?void 0:document.body,s.value),r&&document&&(document.body.style.width=d)},200)};G(t,p=>{if(!p){u();return}r=!ze(document.body,s.value),r&&(d=document.body.style.width),a=Oo(o.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,v=Ao(document.body,"overflowY");a>0&&(c||v==="scroll")&&r&&(document.body.style.width=`calc(100% - ${a}px)`),Lo(document.body,s.value)}),Nt(()=>u())},mt=t=>{if(!t)return{onClick:_e,onMousedown:_e,onMouseup:_e};let e=!1,o=!1;return{onClick:d=>{e&&o&&t(d),e=o=!1},onMousedown:d=>{e=d.target===d.currentTarget},onMouseup:d=>{o=d.target===d.currentTarget}}};let q=[];const Ge=t=>{const e=t;e.key===pt.esc&&q.forEach(o=>o(e))},Fo=t=>{Z(()=>{q.length===0&&document.addEventListener("keydown",Ge),te&&q.push(t)}),Se(()=>{q=q.filter(e=>e!==t),q.length===0&&te&&document.removeEventListener("keydown",Ge)})},xe="focus-trap.focus-after-trapped",Te="focus-trap.focus-after-released",No="focus-trap.focusout-prevented",Xe={cancelable:!0,bubbles:!1},$o={cancelable:!0,bubbles:!1},qe="focusAfterTrapped",Ze="focusAfterReleased",vt=Symbol("elFocusTrap"),Fe=D(),Ce=D(0),Ne=D(0);let ae=0;const yt=t=>{const e=[],o=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0||s===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)e.push(o.currentNode);return e},Je=(t,e)=>{for(const o of t)if(!Uo(o,e))return o},Uo=(t,e)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},Wo=t=>{const e=yt(t),o=Je(e,t),s=Je(e.reverse(),t);return[o,s]},Vo=t=>t instanceof HTMLInputElement&&"select"in t,H=(t,e)=>{if(t&&t.focus){const o=document.activeElement;t.focus({preventScroll:!0}),Ne.value=window.performance.now(),t!==o&&Vo(t)&&e&&t.select()}};function Qe(t,e){const o=[...t],s=t.indexOf(e);return s!==-1&&o.splice(s,1),o}const Ko=()=>{let t=[];return{push:s=>{const a=t[0];a&&s!==a&&a.pause(),t=Qe(t,s),t.unshift(s)},remove:s=>{var a,r;t=Qe(t,s),(r=(a=t[0])==null?void 0:a.resume)==null||r.call(a)}}},Ho=(t,e=!1)=>{const o=document.activeElement;for(const s of t)if(H(s,e),document.activeElement!==o)return},et=Ko(),Yo=()=>Ce.value>Ne.value,re=()=>{Fe.value="pointer",Ce.value=window.performance.now()},tt=()=>{Fe.value="keyboard",Ce.value=window.performance.now()},zo=()=>(Z(()=>{ae===0&&(document.addEventListener("mousedown",re),document.addEventListener("touchstart",re),document.addEventListener("keydown",tt)),ae++}),Se(()=>{ae--,ae<=0&&(document.removeEventListener("mousedown",re),document.removeEventListener("touchstart",re),document.removeEventListener("keydown",tt))}),{focusReason:Fe,lastUserFocusTimestamp:Ce,lastAutomatedFocusTimestamp:Ne}),le=t=>new CustomEvent(No,{...$o,detail:t}),jo=V({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[qe,Ze,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:e}){const o=D();let s,a;const{focusReason:r}=zo();Fo(i=>{t.trapped&&!d.paused&&e("release-requested",i)});const d={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},u=i=>{if(!t.loop&&!t.trapped||d.paused)return;const{key:l,altKey:n,ctrlKey:y,metaKey:g,currentTarget:_,shiftKey:S}=i,{loop:T}=t,b=l===pt.tab&&!n&&!y&&!g,L=document.activeElement;if(b&&L){const x=_,[k,w]=Wo(x);if(k&&w){if(!S&&L===w){const A=le({focusReason:r.value});e("focusout-prevented",A),A.defaultPrevented||(i.preventDefault(),T&&H(k,!0))}else if(S&&[k,x].includes(L)){const A=le({focusReason:r.value});e("focusout-prevented",A),A.defaultPrevented||(i.preventDefault(),T&&H(w,!0))}}else if(L===x){const A=le({focusReason:r.value});e("focusout-prevented",A),A.defaultPrevented||i.preventDefault()}}};at(vt,{focusTrapRef:o,onKeydown:u}),G(()=>t.focusTrapEl,i=>{i&&(o.value=i)},{immediate:!0}),G([o],([i],[l])=>{i&&(i.addEventListener("keydown",u),i.addEventListener("focusin",v),i.addEventListener("focusout",f)),l&&(l.removeEventListener("keydown",u),l.removeEventListener("focusin",v),l.removeEventListener("focusout",f))});const p=i=>{e(qe,i)},c=i=>e(Ze,i),v=i=>{const l=m(o);if(!l)return;const n=i.target,y=i.relatedTarget,g=n&&l.contains(n);t.trapped||y&&l.contains(y)||(s=y),g&&e("focusin",i),!d.paused&&t.trapped&&(g?a=n:H(a,!0))},f=i=>{const l=m(o);if(!(d.paused||!l))if(t.trapped){const n=i.relatedTarget;!Mo(n)&&!l.contains(n)&&setTimeout(()=>{if(!d.paused&&t.trapped){const y=le({focusReason:r.value});e("focusout-prevented",y),y.defaultPrevented||H(a,!0)}},0)}else{const n=i.target;n&&l.contains(n)||e("focusout",i)}};async function C(){await De();const i=m(o);if(i){et.push(d);const l=i.contains(document.activeElement)?s:document.activeElement;if(s=l,!i.contains(l)){const y=new Event(xe,Xe);i.addEventListener(xe,p),i.dispatchEvent(y),y.defaultPrevented||De(()=>{let g=t.focusStartEl;$t(g)||(H(g),document.activeElement!==g&&(g="first")),g==="first"&&Ho(yt(i),!0),(document.activeElement===l||g==="container")&&H(i)})}}}function h(){const i=m(o);if(i){i.removeEventListener(xe,p);const l=new CustomEvent(Te,{...Xe,detail:{focusReason:r.value}});i.addEventListener(Te,c),i.dispatchEvent(l),!l.defaultPrevented&&(r.value=="keyboard"||!Yo()||i.contains(document.activeElement))&&H(s??document.body),i.removeEventListener(Te,c),et.remove(d)}}return Z(()=>{t.trapped&&C(),G(()=>t.trapped,i=>{i?C():h()})}),Se(()=>{t.trapped&&h()}),{onKeydown:u}}});function Go(t,e,o,s,a,r){return $(t.$slots,"default",{handleKeydown:t.onKeydown})}var Xo=Be(jo,[["render",Go],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const qo=Oe({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Le([String,Array,Object])},zIndex:{type:Le([String,Number])}}),Zo={click:t=>t instanceof MouseEvent},Jo="overlay";var Qo=V({name:"ElOverlay",props:qo,emits:Zo,setup(t,{slots:e,emit:o}){const s=Me(Jo),a=p=>{o("click",p)},{onClick:r,onMousedown:d,onMouseup:u}=mt(t.customMaskEvent?void 0:a);return()=>t.mask?W("div",{class:[s.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:r,onMousedown:d,onMouseup:u},[$(e,"default")],ie.STYLE|ie.CLASS|ie.PROPS,["onClick","onMouseup","onMousedown"]):Ut("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[$(e,"default")])}});const es=Qo,ht=Symbol("dialogInjectionKey"),gt=Oe({center:Boolean,alignCenter:Boolean,closeIcon:{type:Mt},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),ts={close:()=>!0},os=["aria-level"],ss=["aria-label"],ns=["id"],as=V({name:"ElDialogContent"}),rs=V({...as,props:gt,emits:ts,setup(t){const e=t,{t:o}=_o(),{Close:s}=Ot,{dialogRef:a,headerRef:r,bodyId:d,ns:u,style:p}=We(ht),{focusTrapRef:c}=We(vt),v=z(()=>[u.b(),u.is("fullscreen",e.fullscreen),u.is("draggable",e.draggable),u.is("align-center",e.alignCenter),{[u.m("center")]:e.center},e.customClass]),f=Io(c,a),C=z(()=>e.draggable);return Po(a,r,C),(h,i)=>(B(),X("div",{ref:m(f),class:K(m(v)),style:rt(m(p)),tabindex:"-1"},[I("header",{ref_key:"headerRef",ref:r,class:K(m(u).e("header"))},[$(h.$slots,"header",{},()=>[I("span",{role:"heading","aria-level":h.ariaLevel,class:K(m(u).e("title"))},J(h.title),11,os)]),h.showClose?(B(),X("button",{key:0,"aria-label":m(o)("el.dialog.close"),class:K(m(u).e("headerbtn")),type:"button",onClick:i[0]||(i[0]=l=>h.$emit("close"))},[W(m(So),{class:K(m(u).e("close"))},{default:N(()=>[(B(),ce(Wt(h.closeIcon||m(s))))]),_:1},8,["class"])],10,ss)):de("v-if",!0)],2),I("div",{id:m(d),class:K(m(u).e("body"))},[$(h.$slots,"default")],10,ns),h.$slots.footer?(B(),X("footer",{key:0,class:K(m(u).e("footer"))},[$(h.$slots,"footer")],2)):de("v-if",!0)],6))}});var ls=Be(rs,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const is=Oe({...gt,appendToBody:Boolean,beforeClose:{type:Le(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),cs={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ft]:t=>Dt(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ds=(t,e)=>{const s=Vt().emit,{nextZIndex:a}=xo();let r="";const d=Ye(),u=Ye(),p=D(!1),c=D(!1),v=D(!1),f=D(t.zIndex||a());let C,h;const i=To("namespace",kt),l=z(()=>{const M={},j=`--${i.value}-dialog`;return t.fullscreen||(t.top&&(M[`${j}-margin-top`]=t.top),t.width&&(M[`${j}-width`]=ke(t.width))),M}),n=z(()=>t.alignCenter?{display:"flex"}:{});function y(){s("opened")}function g(){s("closed"),s(ft,!1),t.destroyOnClose&&(v.value=!1)}function _(){s("close")}function S(){h==null||h(),C==null||C(),t.openDelay&&t.openDelay>0?{stop:C}=je(()=>x(),t.openDelay):x()}function T(){C==null||C(),h==null||h(),t.closeDelay&&t.closeDelay>0?{stop:h}=je(()=>k(),t.closeDelay):k()}function b(){function M(j){j||(c.value=!0,p.value=!1)}t.beforeClose?t.beforeClose(M):T()}function L(){t.closeOnClickModal&&b()}function x(){te&&(p.value=!0)}function k(){p.value=!1}function w(){s("openAutoFocus")}function R(){s("closeAutoFocus")}function A(M){var j;((j=M.detail)==null?void 0:j.focusReason)==="pointer"&&M.preventDefault()}t.lockScroll&&Bo(p);function oe(){t.closeOnPressEscape&&b()}return G(()=>t.modelValue,M=>{M?(c.value=!1,S(),v.value=!0,f.value=t.zIndex?f.value++:a(),De(()=>{s("open"),e.value&&(e.value.scrollTop=0)})):p.value&&T()}),G(()=>t.fullscreen,M=>{e.value&&(M?(r=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=r)}),Z(()=>{t.modelValue&&(p.value=!0,v.value=!0,S())}),{afterEnter:y,afterLeave:g,beforeLeave:_,handleClose:b,onModalClick:L,close:T,doClose:k,onOpenAutoFocus:w,onCloseAutoFocus:R,onCloseRequested:oe,onFocusoutPrevented:A,titleId:d,bodyId:u,closed:c,style:l,overlayDialogStyle:n,rendered:v,visible:p,zIndex:f}},us=["aria-label","aria-labelledby","aria-describedby"],fs=V({name:"ElDialog",inheritAttrs:!1}),ps=V({...fs,props:is,emits:cs,setup(t,{expose:e}){const o=t,s=Kt();Ue({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},z(()=>!!s.title)),Ue({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},z(()=>!!o.customClass));const a=Me("dialog"),r=D(),d=D(),u=D(),{visible:p,titleId:c,bodyId:v,style:f,overlayDialogStyle:C,rendered:h,zIndex:i,afterEnter:l,afterLeave:n,beforeLeave:y,handleClose:g,onModalClick:_,onOpenAutoFocus:S,onCloseAutoFocus:T,onCloseRequested:b,onFocusoutPrevented:L}=ds(o,r);at(ht,{dialogRef:r,headerRef:d,bodyId:v,ns:a,rendered:h,style:f});const x=mt(_),k=z(()=>o.draggable&&!o.fullscreen);return e({visible:p,dialogContentRef:u}),(w,R)=>(B(),ce(jt,{to:"body",disabled:!w.appendToBody},[W(it,{name:"dialog-fade",onAfterEnter:m(l),onAfterLeave:m(n),onBeforeLeave:m(y),persisted:""},{default:N(()=>[lt(W(m(es),{"custom-mask-event":"",mask:w.modal,"overlay-class":w.modalClass,"z-index":m(i)},{default:N(()=>[I("div",{role:"dialog","aria-modal":"true","aria-label":w.title||void 0,"aria-labelledby":w.title?void 0:m(c),"aria-describedby":m(v),class:K(`${m(a).namespace.value}-overlay-dialog`),style:rt(m(C)),onClick:R[0]||(R[0]=(...A)=>m(x).onClick&&m(x).onClick(...A)),onMousedown:R[1]||(R[1]=(...A)=>m(x).onMousedown&&m(x).onMousedown(...A)),onMouseup:R[2]||(R[2]=(...A)=>m(x).onMouseup&&m(x).onMouseup(...A))},[W(m(Xo),{loop:"",trapped:m(p),"focus-start-el":"container",onFocusAfterTrapped:m(S),onFocusAfterReleased:m(T),onFocusoutPrevented:m(L),onReleaseRequested:m(b)},{default:N(()=>[m(h)?(B(),ce(ls,Ht({key:0,ref_key:"dialogContentRef",ref:u},w.$attrs,{"custom-class":w.customClass,center:w.center,"align-center":w.alignCenter,"close-icon":w.closeIcon,draggable:m(k),fullscreen:w.fullscreen,"show-close":w.showClose,title:w.title,"aria-level":w.headerAriaLevel,onClose:m(g)}),Yt({header:N(()=>[w.$slots.title?$(w.$slots,"title",{key:1}):$(w.$slots,"header",{key:0,close:m(g),titleId:m(c),titleClass:m(a).e("title")})]),default:N(()=>[$(w.$slots,"default")]),_:2},[w.$slots.footer?{name:"footer",fn:N(()=>[$(w.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):de("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,us)]),_:3},8,["mask","overlay-class","z-index"]),[[zt,m(p)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var ms=Be(ps,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const vs=Co(ms);var ue,fe;class ys{constructor(e,o,s){E(this,"moveState",{forward:!1,backward:!1,left:!1,right:!1,playerIsOnGround:!0});E(this,"playerVelocity",new Y);E(this,"player");E(this,"temp",{upVector:new Y(0,1,0),tempVector:new Y,tempVector2:new Y,tempBox:new oo,tempMat:new Ie,tempSegment:new Ve});E(this,"params",{playerSpeed:12,gravity:-50});E(this,"controls");E(this,"camera");E(this,"capsuleInfo",{radius:1,segment:new Ve(new Y,new Y(0,-5,0))});O(this,ue,e=>{const{moveState:o}=this;switch(e.code){case"KeyW":case"ArrowUp":o.forward=!0;break;case"KeyS":case"ArrowDown":o.backward=!0;break;case"KeyA":case"ArrowLeft":o.left=!0;break;case"KeyD":case"ArrowRight":o.right=!0;break;case"Space":o.playerIsOnGround&&(this.playerVelocity.y=20,o.playerIsOnGround=!1)}});O(this,fe,e=>{const{moveState:o}=this;switch(e.code){case"KeyW":case"ArrowUp":o.forward=!1;break;case"KeyS":case"ArrowDown":o.backward=!1;break;case"KeyA":case"ArrowLeft":o.left=!1;break;case"KeyD":case"ArrowRight":o.right=!1;break}});E(this,"reset",()=>{const{playerVelocity:e,player:o,camera:s,controls:a}=this;e.set(0,0,0),o.position.set(0,5,0),s.position.sub(a.target),a.target.copy(o.position),s.position.add(o.position),a.update()});ee("keydown",se(this,ue)),ee("keyup",se(this,fe)),this.player=e,this.controls=o,this.camera=s}updatePlayer(e,o){const{playerVelocity:s,player:a,params:r,controls:d,camera:u}=this,{playerIsOnGround:p,forward:c,backward:v,right:f,left:C}=this.moveState,{upVector:h,tempVector:i}=this.temp;p?s.y=e*r.gravity:s.y+=e*r.gravity,a.position.addScaledVector(s,e);const l=d.getAzimuthalAngle();c&&(i.set(0,0,-1).applyAxisAngle(h,l),a.position.addScaledVector(i,r.playerSpeed*e)),v&&(i.set(0,0,1).applyAxisAngle(h,l),a.position.addScaledVector(i,r.playerSpeed*e)),C&&(i.set(-1,0,0).applyAxisAngle(h,l),a.position.addScaledVector(i,r.playerSpeed*e)),f&&(i.set(1,0,0).applyAxisAngle(h,l),a.position.addScaledVector(i,r.playerSpeed*e)),a.updateMatrixWorld();const{tempBox:n,tempMat:y,tempSegment:g,tempVector2:_}=this.temp,S=this.capsuleInfo;n.makeEmpty(),y.copy(o.matrixWorld).invert(),g.copy(S.segment),g.start.applyMatrix4(a.matrixWorld).applyMatrix4(y),g.end.applyMatrix4(a.matrixWorld).applyMatrix4(y),n.expandByPoint(g.start),n.expandByPoint(g.end),n.min.addScalar(-S.radius),n.max.addScalar(S.radius),o.geometry.boundsTree.shapecast({intersectsBounds:x=>x.intersectsBox(n),intersectsTriangle:x=>{const k=i,w=_,R=x.closestPointToSegment(g,k,w);if(R<S.radius){const A=S.radius-R,oe=w.sub(k).normalize();g.start.addScaledVector(oe,A),g.end.addScaledVector(oe,A)}}});const T=i;T.copy(g.start).applyMatrix4(o.matrixWorld);const b=_;b.subVectors(T,a.position),this.moveState.playerIsOnGround=b.y>Math.abs(e*s.y*.25);const L=Math.max(0,b.length()-1e-5);b.normalize().multiplyScalar(L),a.position.add(b),p?s.set(0,0,0):(b.normalize(),s.addScaledVector(b,-b.dot(s))),u.position.sub(d.target),d.target.copy(a.position),u.position.add(a.position),a.position.y<-25&&this.reset()}get isMoving(){const{forward:e,backward:o,left:s,right:a,playerIsOnGround:r}=this.moveState;return e||o||s||a||!r}}ue=new WeakMap,fe=new WeakMap;const hs=[new URL("/WebglStudy/assets/1-91d1fd28.png",self.location).href,new URL("/WebglStudy/assets/2-577e2981.png",self.location).href,new URL("/WebglStudy/assets/3-e96f4416.jpg",self.location).href,new URL("/WebglStudy/assets/4-2c59a331.jpg",self.location).href,new URL("/WebglStudy/assets/5-c8aed110.png",self.location).href,new URL("/WebglStudy/assets/6-9d09d2dc.png",self.location).href,new URL("/WebglStudy/assets/7-68ca4bc6.png",self.location).href,new URL("/WebglStudy/assets/8-74f5f15e.jpg",self.location).href,new URL("/WebglStudy/assets/9-44142f78.jpg",self.location).href,new URL("/WebglStudy/assets/10-1cde4a43.png",self.location).href],Ae={1:{title:"《小橘贝》",author:"小雅",describe:`
		它站在画面中央，静静地凝视着观众，柔和的橘色将它的柔软毛发和灵动眼眸妩媚地勾勒出来。<br>
		小猫的小耳朵微微竖起，似乎在倾听着什么，身体略微前倾，展现出它对周围世界的好奇和敏感。<br>
		画面的背景色以淡蓝色为主，这种色彩营造了温馨轻柔的氛围，让人仿佛置身于阳光明媚的午后时光中。<br>
		整个画作细致精致、色彩明亮而温暖，带给人们一种温馨、亲切的感受。
		`},2:{title:"《微光》",author:"小雅",describe:`
		微小的星光和银河组成了一个神秘的宇宙世界，让人感到无限的遐想和想象。<br>
		当你凝视着这幅画时，你会感受到无边无际的深邃和宁静。<br>
		你仿佛置身于一个没有噪音、没有烦扰的夜空中。在这个宁静的空间里，你可以看到银河中微光闪烁的样子。<br>
		这些微光似乎是夜空中唯一的生命体，它们微弱却坚定地发出光芒，点亮着整个银河系。<br>
		这些微光是如此的纤细而又强大，仿佛在无边的黑暗中，只有它们才能给人带来希望和力量。
		`},3:{title:"《天鹅》",author:"小雅",describe:`
		湖面静谧如镜，微风拂过，泛起一圈圈细微的涟漪，仿佛为优雅的白色天鹅们铺上了一层晶莹剔透的纱帐。<br>
		其中一只白羽如雪的天鹅在水中自由自在地舞动着优美的姿态，如同一位华丽的舞者在水上翩翩起舞。<br>
		纯白色羽毛在阳光的照射下，闪烁着淡淡的光晕，如同珍珠一般璀璨夺目。
		`},4:{title:"《山中小屋》",author:"小雅",describe:`
		宁静而恬淡，远山隐现于云雾中，仿佛是一幅梦幻般的画卷。<br>
		小屋在山脚下宁静地伫立，墙体洁白，屋顶泛着淡淡的阳光，使得小屋与周围的环境相互映衬。<br>
		流露出一种自然的和谐之美。
		`},5:{title:"《太空人》",author:"小雅",describe:`
		太空人身披着黑夜在星罗棋布的宇宙中漫游。<br>
		虽说现在已经是太空时代，人类早就可以坐太空飞船去月球，<br>
		但却永远无法探索别人内心的宇宙。
		`},6:{title:"《粉色海洋》",author:"小雅",describe:`
		粉色云朵蓬松如棉花糖展开眼前，弯月微笑在缝隙间，月光柔和，清雅动人。<br>
		紫色天空如梦，星辉闪烁，默默倾听，轻轻地，微风拂面，悄悄地，生命在流动。
		`},7:{title:"《风平浪静》",author:"小雅",describe:`
		撑一条船，离开岸边一百米，风平浪静，彩霞慢慢淡下去。<br>
		撑一条船，离开岸边两百米，风平浪静，夜晚轻轻呼唤你。<br>
		撑一条船，离开岸边三百米，风平浪静，大鱼笑我傻兮兮。<br>
		撑一条船 离开岸边四百米，风平浪静，星儿闪闪笑眯眯。<br>
		撑一条船 离开岸边五百米，风平浪静，海龟向我挥手臂。
		`},8:{title:"《向日葵》",author:"小雅",describe:`
		阳光照耀，金黄的花盘。<br>
		宛如一盏明灯，指引前行。<br>
		向日葵，你是信仰，你是力量，你是光辉，你是坚毅，你是忠诚，你是爱慕，你是美丽。
		`},9:{title:"《花·虎·蝶》",author:"小雅",describe:`
		一段奇妙的相遇，是自由和勇气的结合，是一份神秘而又动人的韵味。<br>
		在这片色彩斑斓的花海之中，一只带着蝴蝶翅膀的老虎，骑着踏板车，<br>
		它像是一道闪电，划破了这片美好的天地。<br>
		翅膀轻轻地振动，仿佛随时可以飞离这片美好的天地，飞向更广阔的天空。
		`},10:{title:"《豚》",author:"小雅",describe:`
		所有的转折隐藏在密集的鸟群中，天空与海洋都无法察觉，怀着美梦却可以看见。<br>
		摸索颠倒的一瞬间，所有的怀念隐藏在相似的日子里，心里的蜘蛛模仿人类张灯结彩
		`}},P={width:window.innerWidth,height:window.innerHeight},Re=D();var pe,bt,me,wt,ve,Et,ye,St,he,Ct;class gs{constructor(e){O(this,pe);O(this,me);O(this,ve);O(this,ye);O(this,he);E(this,"loader",new wo);E(this,"textureLoader",new so);E(this,"collisionScene");E(this,"textureBoards",{});E(this,"galleryBoards",{});E(this,"raycastObjects",[]);E(this,"loaded",D(!1));E(this,"scene");E(this,"loadingState",{loaded:[],total:[],progress:D(0)});this.scene=e,U(this,he,Ct).call(this),U(this,me,wt).call(this);const o=[U(this,pe,bt).call(this),U(this,ve,Et).call(this)];Promise.all(o).then(()=>{U(this,ye,St).call(this),this.loaded.value=!0})}}pe=new WeakSet,bt=function(){const{loader:e,scene:o}=this;return new Promise((s,a)=>{e.load("model/scene_collision.glb",r=>{const d=r.scene;d.updateMatrixWorld(!0),this.collisionScene=d,d.traverse(c=>{(c.name==="home001"||c.name==="PointLight")&&(c.castShadow=!0),c.name.includes("PointLight")&&c instanceof no&&(c.intensity*=2e3),c.name==="home002"&&(c.castShadow=!0,c.receiveShadow=!0),c instanceof Q&&/gallery.*_board/.test(c.name)&&(this.galleryBoards[c.name]=c,this.raycastObjects.push(c))});const u=new Qt(this.collisionScene);u.attributes=["position"];const p=u.generate();p.boundsTree=new eo(p),Re.value=new Q(p),o.add(d),s(r)},r=>{const{loaded:d,total:u,progress:p}=this.loadingState;d[0]=r.loaded,u[0]=r.total,p.value=d.reduce((c,v)=>c+v,0)/u.reduce((c,v)=>c+v,0)})})},me=new WeakSet,wt=function(){const{loader:e,scene:o}=this;return new Promise(s=>{e.load("model/scene_desk_obj.glb",a=>{const r=a.scene;o.add(r),s(a)},a=>{const{loaded:r,total:d,progress:u}=this.loadingState;r[1]=a.loaded,d[1]=a.total,u.value=r.reduce((p,c)=>p+c,0)/d.reduce((p,c)=>p+c,0)})})},ve=new WeakSet,Et=async function(){const{textureLoader:e,textureBoards:o}=this,s=[];function a(r){r.colorSpace=ct;const d=r.image.width/r.image.height;let u=1,p=1;d>1?u=1/d:p=d,r.offset.set(.5-u/2,.5-p/2),r.repeat.set(u,p)}for(const[r,d]of hs.entries()){const u=new Promise(p=>{e.load(d,c=>{a(c),o[r+1]=c,p(c)})});s.push(u)}return await Promise.all(s),o},ye=new WeakSet,St=function(){const{textureBoards:e,galleryBoards:o}=this;for(const s in e){const a=o[`gallery${s}_board`],r=a.material;r.map=e[s],a.userData={name:a.name,title:Ae[s].title,author:Ae[s].author,describe:Ae[s].describe,index:s,src:e[s].image.src,show_boards:!0},[4,5,6,7,9].includes(+s)&&(a.rotation.y=-Math.PI/2),+s==8&&(a.rotation.y=Math.PI)}},he=new WeakSet,Ct=function(){const e=new Eo(new Pe(100,100),{textureWidth:P.width*window.devicePixelRatio,textureHeight:P.height*window.devicePixelRatio,color:16777215});e.material instanceof ao&&(e.material.transparent=!0,e.material.fragmentShader=e.material.fragmentShader.replace("gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 )","gl_FragColor = vec4( blendOverlay( base.rgb, color ), 0.1 )")),e.rotation.x=-Math.PI/2,this.scene.add(e)};class bs{constructor(e){E(this,"camera");E(this,"hoverPoint",new Ke(0,0));E(this,"tooltipRaycaster",new He);E(this,"raycastObjects",[]);E(this,"bindClickRayCastObj",(e=[],o)=>{let s=0,a=0;ee("mousedown",r=>{s=r.screenX,a=r.screenY}),this.raycastObjects=e,ee("mouseup",r=>{const d=Math.abs(r.screenX-s),u=Math.abs(r.screenY-a);if(d>1||u>1)return;const p=new Ke(r.clientX/P.width*2-1,1-r.clientY/P.height*2),c=new He;c.far=18,c.setFromCamera(p,this.camera);const v=c.intersectObjects(e);v.length&&o(v[0].object)})});this.camera=e,this.tooltipRaycaster.far=15}updateTooltipRayCast(e,o){if(this.raycastObjects.length){this.tooltipRaycaster.setFromCamera(this.hoverPoint,this.camera);const s=this.tooltipRaycaster.intersectObjects(this.raycastObjects);s.length&&s[0].object.userData.title?e(s[0].object):o()}}}const ws={class:"tracking-wider select-none",text:"white"},Es={class:"fixed bottom-190px left-1/2 -translate-x-1/2 leading-40px px-20px rounded bg-black/40"},Ss=I("footer",{class:"fixed bottom-20px left-1/2 -translate-x-1/2 leading-40px rounded bg-black/40 w-50vw text-center"},"Tips：点击此画可查看详情",-1),Cs=V({__name:"Tip",props:{title:{}},setup(t){return(e,o)=>(B(),X("div",ws,[I("header",Es,J(e.title),1),Ss]))}}),_s={class:"flex justify-between gap-x-40px tracking-wider leading-32px",text:"16px white"},xs={class:"font-bold",text:"20px"},Ts=["innerHTML"],As=["src"],Ls=V({__name:"Detail",props:{data:{}},setup(t){return(e,o)=>(B(),X("div",_s,[I("aside",null,[I("header",xs,J(e.data.title),1),I("p",null,"作者："+J(e.data.author),1),I("footer",{class:"text-justify leading-40px",innerHTML:e.data.describe},null,8,Ts)]),I("img",{src:e.data.src,alt:"",class:"w-670px h-500px"},null,8,As)]))}}),ot=new Y,Ds=new lo,st=new Y;class ks extends ro{constructor(e=document.createElement("div")){super(),this.isCSS3DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(o){o.element instanceof Element&&o.element.parentNode!==null&&o.element.parentNode.removeChild(o.element)})})}copy(e,o){return super.copy(e,o),this.element=e.element.cloneNode(!0),this}}const F=new Ie,Rs=new Ie;class Ms{constructor(e={}){const o=this;let s,a,r,d;const u={camera:{fov:0,style:""},objects:new WeakMap},p=e.element!==void 0?e.element:document.createElement("div");p.style.overflow="hidden",this.domElement=p;const c=document.createElement("div");c.style.transformOrigin="0 0",c.style.pointerEvents="none",p.appendChild(c);const v=document.createElement("div");v.style.transformStyle="preserve-3d",c.appendChild(v),this.getSize=function(){return{width:s,height:a}},this.render=function(l,n){const y=n.projectionMatrix.elements[5]*d;u.camera.fov!==y&&(c.style.perspective=n.isPerspectiveCamera?y+"px":"",u.camera.fov=y),n.view&&n.view.enabled?(c.style.transform=`translate( ${-n.view.offsetX*(s/n.view.width)}px, ${-n.view.offsetY*(a/n.view.height)}px )`,c.style.transform+=`scale( ${n.view.fullWidth/n.view.width}, ${n.view.fullHeight/n.view.height} )`):c.style.transform="",l.matrixWorldAutoUpdate===!0&&l.updateMatrixWorld(),n.parent===null&&n.matrixWorldAutoUpdate===!0&&n.updateMatrixWorld();let g,_;n.isOrthographicCamera&&(g=-(n.right+n.left)/2,_=(n.top+n.bottom)/2);const S=n.view&&n.view.enabled?n.view.height/n.view.fullHeight:1,b=(n.isOrthographicCamera?`scale( ${S} )scale(`+y+")translate("+f(g)+"px,"+f(_)+"px)"+C(n.matrixWorldInverse):`scale( ${S} )translateZ(`+y+"px)"+C(n.matrixWorldInverse))+"translate("+r+"px,"+d+"px)";u.camera.style!==b&&(v.style.transform=b,u.camera.style=b),i(l,l,n)},this.setSize=function(l,n){s=l,a=n,r=s/2,d=a/2,p.style.width=l+"px",p.style.height=n+"px",c.style.width=l+"px",c.style.height=n+"px",v.style.width=l+"px",v.style.height=n+"px"};function f(l){return Math.abs(l)<1e-10?0:l}function C(l){const n=l.elements;return"matrix3d("+f(n[0])+","+f(-n[1])+","+f(n[2])+","+f(n[3])+","+f(n[4])+","+f(-n[5])+","+f(n[6])+","+f(n[7])+","+f(n[8])+","+f(-n[9])+","+f(n[10])+","+f(n[11])+","+f(n[12])+","+f(-n[13])+","+f(n[14])+","+f(n[15])+")"}function h(l){const n=l.elements;return"translate(-50%,-50%)"+("matrix3d("+f(n[0])+","+f(n[1])+","+f(n[2])+","+f(n[3])+","+f(-n[4])+","+f(-n[5])+","+f(-n[6])+","+f(-n[7])+","+f(n[8])+","+f(n[9])+","+f(n[10])+","+f(n[11])+","+f(n[12])+","+f(n[13])+","+f(n[14])+","+f(n[15])+")")}function i(l,n,y,g){if(l.isCSS3DObject){const _=l.visible===!0&&l.layers.test(y.layers)===!0;if(l.element.style.display=_===!0?"":"none",_===!0){l.onBeforeRender(o,n,y);let S;l.isCSS3DSprite?(F.copy(y.matrixWorldInverse),F.transpose(),l.rotation2D!==0&&F.multiply(Rs.makeRotationZ(l.rotation2D)),l.matrixWorld.decompose(ot,Ds,st),F.setPosition(ot),F.scale(st),F.elements[3]=0,F.elements[7]=0,F.elements[11]=0,F.elements[15]=1,S=h(F)):S=h(l.matrixWorld);const T=l.element,b=u.objects.get(l);if(b===void 0||b.style!==S){T.style.transform=S;const L={style:S};u.objects.set(l,L)}T.parentNode!==v&&v.appendChild(T),l.onAfterRender(o,n,y)}}for(let _=0,S=l.children.length;_<S;_++)i(l.children[_],n,y)}}}var ge,_t,be,xt,we,Tt;class Os{constructor(e){O(this,ge);O(this,be);O(this,we);E(this,"cssScene");E(this,"scene");E(this,"cssRenderer");E(this,"update",e=>{this.cssRenderer.render(this.cssScene,e)});E(this,"dispose",()=>{this.cssScene.traverse(e=>{e.material&&e.material.dispose(),e.geometry&&e.geometry.dispose(),e.dispose&&e.dispose(),e=null}),this.cssScene.clear()});this.cssScene=new dt,this.scene=e,this.cssRenderer=new Ms,U(this,ge,_t).call(this),U(this,be,xt).call(this),U(this,we,Tt).call(this)}}ge=new WeakSet,_t=function(){const{cssRenderer:e}=this;e.setSize(P.width,P.height),e.domElement.style.position="absolute",e.domElement.style.top="0px",e.domElement.style.zIndex="-1",document.body.appendChild(e.domElement)},be=new WeakSet,xt=function(){ee("resize",()=>{this.cssRenderer.setSize(P.width,P.height)})},we=new WeakSet,Tt=function(){const e=new Pe(1.5,1.3),o=new io({color:0,side:co,transparent:!0,opacity:0,blending:uo}),s=new Q(e,o);s.position.set(-15.55,5.5,36.33),s.rotation.set(0,Math.PI/2,0),this.scene.add(s);const a=document.createElement("iframe");a.src="/universe/index.html",a.style.width="1200px",a.style.height="900px",a.style.boxSizing="border-box",a.style.opacity="1";const r=new ks(a);r.position.copy(s.position),r.rotation.copy(s.rotation),r.scale.set(.002,.002,.002),this.cssScene.add(r)};var Ee;class Is{constructor(e,o){E(this,"scene");E(this,"camera");E(this,"sound");O(this,Ee,()=>{const e=new fo;this.camera.add(e);const o=new po(e);this.sound=o,new mo().load("https://ws.stream.qqmusic.qq.com/C400002b58Uc1ujQre.m4a?guid=637115780&vkey=F118885DF2C776D7264A09A3DC8DE223CE1C6EBA576444DF495A7B1122AB746DD97A7A8F8B9AF11434631F0606D24DD2D0AA2D1738D8A813&uin=&fromtag=120032",r=>{o.setBuffer(r),o.setRefDistance(20),o.setDirectionalCone(180,230,.5),o.setLoop(!0)});const a=new Q(new Pe(1,1),new ut({color:16711680}));a.position.set(-15.9,4.49,36.42),a.visible=!1,this.scene.add(a),a.add(o)});E(this,"play",()=>{this.sound.play()});E(this,"pause",()=>{this.sound.pause()});this.scene=e,this.camera=o,se(this,Ee).call(this)}}Ee=new WeakMap;const Ps={class:"fixed left-20px top-20px"},Bs=V({__name:"Index",setup(t){const e=new dt,o=new vo(55,P.width/P.height,.1,1e3);o.position.set(0,0,3);const s=new yo({antialias:!0});s.setSize(P.width,P.height),s.setPixelRatio(window.devicePixelRatio),s.shadowMap.enabled=!0,s.outputColorSpace=ct,s.toneMapping=ho;const a=Gt();Z(()=>{a.value.appendChild(s.domElement)});const r=new Jt(o,s.domElement);r.minDistance=1e-4,r.maxDistance=1e-4;const d=new gs(e),u=new bs(o);G(d.loaded,b=>{b&&u.bindClickRayCastObj(d.raycastObjects,T)});const p=new Q(new to(.5,2.5,.5,10,1),new ut({color:255}));p.geometry.translate(0,-.25,0),e.add(p);const c=new Os(e),v=new ys(p,r,o);v.reset();const f=new Is(e,o),C=D(!1);function h(){C.value=!C.value,C.value?f.play():f.pause()}const i=new go;s.setAnimationLoop(()=>{s.render(e,o),r.update();const b=Math.min(i.getDelta(),.05);Re.value&&v.updatePlayer(b,Re.value),v.isMoving&&u.updateTooltipRayCast(n,y),c.update(o)});const l=D();function n(b){l.value=b.userData.title}function y(){l.value=null}const g=z(()=>d.loadingState.progress.value<1),_=D(!1),S=D();function T(b){S.value=b.userData,_.value=!_.value}return Xt(()=>{bo(e,s),c.dispose()}),(b,L)=>{const x=It,k=vs,w=Rt;return B(),X(qt,null,[I("div",{ref_key:"containerRef",ref:a},null,512),lt((B(),X("div",Ps,[W(x,{type:"primary",onClick:h},{default:N(()=>[Zt(J(m(C)?"暂停音乐":"播放音乐"),1)]),_:1})])),[[w,m(g),void 0,{fullscreen:!0}]]),W(it,{appear:"",name:"fade"},{default:N(()=>[m(l)?(B(),ce(Cs,{key:0,title:m(l)},null,8,["title"])):de("",!0)]),_:1}),W(k,{modelValue:m(_),"onUpdate:modelValue":L[0]||(L[0]=R=>nt(_)?_.value=R:null),width:"70vw",class:"!bg-black !rounded-20px"},{default:N(()=>[W(Ls,{data:m(S)},null,8,["data"])]),_:1},8,["modelValue"])],64)}}});const tn=Ro(Bs,[["__scopeId","data-v-347493b7"]]);export{tn as default};
