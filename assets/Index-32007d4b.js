var d=Object.defineProperty;var c=(r,e,t)=>e in r?d(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var m=(r,e,t)=>(c(r,typeof e!="symbol"?e+"":e,t),t);import{r as h,E as p,br as f,$ as w,h as u,av as g,S as v,P as L,W as C,j as y,m as S}from"./three.module-2f5a30fe.js";import{O as _}from"./OrbitControls-27c6eec7.js";import{a as x}from"./index-6e4d2cdc.js";import{F as A}from"./FBXLoader-1e225398.js";import{d as T}from"./index-1a26f821.js";import{d as E,s as D,l as R,p as F,o as b,c as k}from"./index-76c78296.js";class M{constructor(){m(this,"updateData",()=>{if(!this.isStart)return!1;const e=this.clock.getDelta();this.time.value+=e,this.startTime.value+=e,this.startTime.value>=this.startLength.value&&(this.startTime.value=this.startLength.value)});this.fbxLoader=new A,this.group=new h,this.clock=new p,this.time={value:0},this.startTime={value:0},this.startLength={value:2},this.isStart=!1,this.fbxLoader.load("model/shanghai.FBX",e=>{this.group.add(e),e.traverse(t=>{t.name==="CITY_UNTRIANGULATED"&&(Array.isArray(t.material)?t.material:[t.material]).forEach(a=>{a.transparent=!0,a.color.setStyle("#9370DB")}),t.name==="LANDMASS"&&(Array.isArray(t.material)?t.material:[t.material]).forEach(a=>{a.transparent=!0,a.color.setStyle("#040912")})}),this.init()})}init(){this.isStart=!0,this.clock.start(),this.surroundLine()}surroundLine(){let e;this.group.traverse(s=>{s.name==="CITY_UNTRIANGULATED"&&(e=s)});const t=new f(e.geometry),i=new w({transparent:!0,uniforms:{uColor:{value:new u("#FFF")}},vertexShader:`
       void main() {
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragmentShader:` 
        uniform vec3 uColor;
        void main() {
          gl_FragColor = vec4(uColor, 1);
        }
      `}),a=new g(t,i);a.name="surroundLine",a.applyMatrix4(e.matrix.clone()),e.parent.add(a)}}const B=M,X=E({__name:"Index",setup(r){const e={width:window.innerWidth,height:window.innerHeight},t=new v,i=new L(50,e.width/e.height,1,1e4);i.position.set(600,750,-1221);const a=new C({antialias:!0,alpha:!0});a.setSize(e.width,e.height),a.setPixelRatio(window.devicePixelRatio),a.setClearColor(new u("#32373E"),1);const s=D();R(()=>{s.value.appendChild(a.domElement)});const n=new _(i,a.domElement);n.enableDamping=!0,t.add(new y(11382189));const o=new S(16777215,5);o.position.set(100,100,0),t.add(o);const l=new B;return t.add(l.group),x(()=>{l.updateData(),n.update(),a.render(t,i)}),F(()=>{T(t,a)}),(G,I)=>(b(),k("div",{ref_key:"containerRef",ref:s},null,512))}});export{X as default};
