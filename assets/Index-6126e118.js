var c=Object.defineProperty;var h=(r,e,t)=>e in r?c(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var d=(r,e,t)=>(h(r,typeof e!="symbol"?e+"":e,t),t);import{r as p,E as f,br as g,N as w,h as u,ap as v,S as x,P as L,W as y,j as C,m as _}from"./three.module-0f5ed231.js";import{O as S}from"./OrbitControls-477b977e.js";import{a as A}from"./index-d36258bf.js";import{F as T}from"./FBXLoader-adb8728a.js";import{d as b}from"./index-1a26f821.js";import{d as E,s as F,l as D,p as R,o as k,c as B,h as n,F as M}from"./index-aabec682.js";class N{constructor(){d(this,"updateData",()=>{if(!this.isStart)return!1;const e=this.clock.getDelta();this.time.value+=e,this.startTime.value+=e,this.startTime.value>=this.startLength.value&&(this.startTime.value=this.startLength.value)});this.fbxLoader=new T,this.group=new p,this.clock=new f,this.time={value:0},this.startTime={value:0},this.startLength={value:2},this.isStart=!1,this.fbxLoader.load("model/shanghai.FBX",e=>{this.group.add(e),e.traverse(t=>{t.name==="CITY_UNTRIANGULATED"&&(Array.isArray(t.material)?t.material:[t.material]).forEach(a=>{a.transparent=!0,a.color.setStyle("#9370DB")}),t.name==="LANDMASS"&&(Array.isArray(t.material)?t.material:[t.material]).forEach(a=>{a.transparent=!0,a.color.setStyle("#040912")})}),this.init()})}init(){this.isStart=!0,this.clock.start(),this.surroundLine()}surroundLine(){let e;this.group.traverse(i=>{i.name==="CITY_UNTRIANGULATED"&&(e=i)});const t=new g(e.geometry),s=new w({transparent:!0,uniforms:{uColor:{value:new u("#FFF")}},vertexShader:`
       void main() {
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragmentShader:` 
        uniform vec3 uColor;
        void main() {
          gl_FragColor = vec4(uColor, 1);
        }
      `}),a=new v(t,s);a.name="surroundLine",a.applyMatrix4(e.matrix.clone()),e.parent.add(a)}}const G=N,I=n("div",{class:"fixed left-20px top-20px px-20px leading-50px z-1 bg-white rounded"},[n("span",null,"学习来源："),n("a",{href:"https://gitee.com/superzay/threejs-animate",target:"_blank",class:"text-blue"},"threejs 3d开发")],-1),H=E({__name:"Index",setup(r){const e={width:window.innerWidth,height:window.innerHeight},t=new x,s=new L(50,e.width/e.height,1,1e4);s.position.set(600,750,-1221);const a=new y({antialias:!0,alpha:!0});a.setSize(e.width,e.height),a.setPixelRatio(window.devicePixelRatio),a.setClearColor(new u("#32373E"),1);const i=F();D(()=>{i.value.appendChild(a.domElement)});const o=new S(s,a.domElement);o.enableDamping=!0,t.add(new C(11382189));const l=new _(16777215,5);l.position.set(100,100,0),t.add(l);const m=new G;return t.add(m.group),A(()=>{m.updateData(),o.update(),a.render(t,s)}),R(()=>{b(t,a)}),(P,U)=>(k(),B(M,null,[n("div",{ref_key:"containerRef",ref:i},null,512),I],64))}});export{H as default};
