import{S as U,F as J,P as K,V as l,W as Q,T as u,g as G,b as M,B as X,a as Y,o as $,c as ee,i as L,j as te,k as oe,p as ne,d as se,q as ae,r as ie,s as re,t as ce,u as A,f as de,D as he,v as R}from"./three.module-4dd0ab4d.js";import{O as le}from"./OrbitControls-79d41aec.js";import{d as pe,s as we,l as ue,o as me,c as fe}from"./index-5217155f.js";import{_ as ge}from"./_plugin-vue_export-helper-c27b6911.js";const _e="/assets/starry-6de0c992.png",Me="/assets/earth-b01a299a.jpg",ve="/assets/star1-e560cfcd.png",Se="/assets/star2-d0154e22.png",be="/assets/cloud-feeb4763.png",k=45,xe=pe({__name:"2.星云",setup(ye){const i=new U;i.fog=new J(0,0,1e4);const m={width:window.innerWidth,height:window.innerHeight,depth:1200},e={...m};let c=0;const d=new K(k,e.width/e.height,.1,1e4);d.position.set(...v());function v(){const t=new l;return c=Math.floor(e.height/2/Math.tan(k/2/180*Math.PI)-e.depth/2),t.setZ(c),t.toArray()}window.addEventListener("resize",()=>{const[t,n]=[m.width,m.height];e.width=window.innerWidth,e.height=window.innerHeight,h.setSize(e.width,e.height),d.aspect=e.width/e.height,d.position.set(...v()),d.updateProjectionMatrix(),f.scale.set(e.width/t,e.height/n,1)});const h=new Q({antialias:!0});h.setSize(e.width,e.height),h.setPixelRatio(window.devicePixelRatio);const S=we();ue(()=>{S.value.appendChild(h.domElement)});const b=new u().load(_e);b.colorSpace=G;const f=new M(new X(e.width,e.height,e.depth),new Y({side:$,map:b}));console.log(f),i.add(f);const x=new u().load(Me);x.colorSpace=G;const g=new M(new ee(50,32,16),new L({map:x,shininess:100}));g.position.set(-200,160,-400),i.add(g),i.add(new te(16777215,1));const w=new oe(415229,1e6,0);w.power=1e6,w.position.set(0,0,70),w.position.set(-140,160,-300),i.add(w);const y=[{color:{h:.6,s:100,l:.75},img:ve},{color:{h:.3,s:50,l:.8},img:Se}],C=[];function P(t){const n=new se,s=[];for(let o=0;o<1500;o++){const r=R.randFloatSpread(e.width),Z=Math.random()*(e.height/2),N=R.randFloat(-e.depth/2,c);s.push(r,Z,N)}n.setAttribute("position",new ae(s,3));const a=new ie,p=new u;for(const o of y){const r=new re(n,new ce({size:16,depthTest:!0,map:p.load(o.img),transparent:!0,blending:A}));r.material.color.setHSL(o.color.h,o.color.s,o.color.l),r.rotation.set(Math.random()*.2-.15,Math.random()*.2-.15,Math.random()*.2-.15),a.add(r),C.push(r)}return a.position.set(0,0,t),i.add(a),a}const _=-c-e.depth/2,E=P(_),H=P(_*2);function T(){[E,H].forEach((t,n)=>{const s=Date.now()*5e-4;for(const[a,p]of y.entries()){const o=p.color,r=360*(o.h+s)%360/360;C[a].material.color.setHSL(Number.parseFloat(r.toFixed(2)),o.s,o.l)}t.position.z>c+e.depth/2&&(t.position.z=_),t.position.z+=7})}function z(t,n){const s=new M(new de(t,n),new L({map:new u().load(be),transparent:!0,depthTest:!1,side:he,blending:A}));return i.add(s),s}const W=[new l(-e.width/10,0,-e.depth/2),new l(-e.width/4,e.height/8,0),new l(-e.width/4,0,c)],j=[new l(e.width/8,e.height/8,-e.depth/2),new l(e.width/8,e.height/8,c)],D=z(300,200),I=B(D,W,.001),q=z(100,100),O=B(q,j,.005);function B(t,n,s){let a=0;const p=new ne(n);return()=>{const o=p.getPoint(a%1);t.position.set(...o.toArray()),a+=s}}const V=new le(d,h.domElement);function F(){g.rotation.y+=.008,T(),I(),O(),V.update(),h.render(i,d),requestAnimationFrame(F)}return F(),(t,n)=>(me(),fe("div",{ref_key:"containerRef",ref:S},null,512))}});const Fe=ge(xe,[["__scopeId","data-v-8543ede8"]]);export{Fe as default};
